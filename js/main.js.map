{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/scripts/_appius.equalise.js","src/scripts/_appius.footerToggle.js","src/scripts/_appius.formRegexValidation.js","src/scripts/_appius.primaryNav.js","src/scripts/_appius.scroller.js","src/scripts/_sunlife.accordions.js","src/scripts/_sunlife.alphabetCarousel.js","src/scripts/_sunlife.help.js","src/scripts/_sunlife.nav.js","src/scripts/_sunlife.showHide.js","src/scripts/styleguide.js","src/scripts/vendor/bootstrap.js","src/scripts/vendor/bootstrap/carousel.js","src/scripts/vendor/bootstrap/tab.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var appius = appius || {};\r\nvar modulePlugin = {}\r\n\r\n// Check to see if plugins array has already been defined.\r\nif (typeof appius.plugins == \"undefined\") {\r\n    appius.plugins = [];\r\n}\r\n\r\n// Create object of the current plugin details\r\nmodulePlugin = {\r\n    version: '1.0.0',\r\n    authors: 'Phil Hazelton',\r\n    name: 'Equaliser',\r\n    filename: 'equalise.js',\r\n    description: 'Provides support for the equal-height helper attribute \"data-equal\". Use different values to creating unique \"groupings\" of elements. Layout is adjusted automatically on resize based on element offsets, not source order. Call init() to resize after markup changes (e.g. on accordions).'\r\n};\r\nappius.plugins.push(modulePlugin);\r\n\r\n\r\n\r\n/** querySelectorAll polyfill (IE6/7) */\r\nif (!document.querySelectorAll) {\r\n    document.querySelectorAll = function (selectors) {\r\n        var style = document.createElement('style'), elements = [], element;\r\n        document.documentElement.firstChild.appendChild(style);\r\n        document._qsa = [];\r\n\r\n        style.styleSheet.cssText = selectors + '{x-qsa:expression(document._qsa && document._qsa.push(this))}';\r\n        window.scrollBy(0, 0);\r\n        style.parentNode.removeChild(style);\r\n\r\n        while (document._qsa.length) {\r\n            element = document._qsa.shift();\r\n            element.style.removeAttribute('x-qsa');\r\n            elements.push(element);\r\n        }\r\n        document._qsa = null;\r\n        return elements;\r\n    };\r\n}\r\n\r\n/** Cross-browser document.ready handler */\r\n(function () {\r\n    'use strict';\r\n    var readyList = [],\r\n    readyFired = false,\r\n    readyEventHandlersInstalled = false;\r\n\r\n    function ready() {\r\n        if (readyFired) return null;\r\n\r\n        readyFired = true;\r\n        for (var i = 0; i < readyList.length; i++) readyList[i].call(window);\r\n        readyList = [];\r\n    }\r\n\r\n    window.docReady = function (callback) {\r\n        if (readyFired) return setTimeout(callback, 1), null;\r\n\r\n        readyList.push(callback);\r\n\r\n        if (document.readyState === 'complete' || (!document.attachEvent && document.readyState === 'interactive'))\r\n            return setTimeout(ready, 1), null;\r\n\r\n        if (!readyEventHandlersInstalled) {\r\n            if (document.addEventListener) {\r\n                document.addEventListener('DOMContentLoaded', ready, false);\r\n                window.addEventListener('load', ready, false);\r\n            } else {\r\n                document.attachEvent('onreadystatechange', function () {\r\n                    if (document.readyState == 'complete') ready();\r\n                });\r\n                window.attachEvent('onload', ready);\r\n            }\r\n            readyEventHandlersInstalled = true;\r\n        }\r\n    };\r\n})();\r\n\r\n\r\n/**\r\n* @fileOverview Provides support for the equal-height helper attribute \"data-equal\"\r\n*   Use different values to creating unique \"groupings\" of elements. Layout is\r\n*   adjusted automatically on resize based on element offsets, not source order.\r\n*   Call init() to resize after markup changes (e.g. on accordions).\r\n* @author Phil Hazelton [phil@appius.com]\r\n* @version 1.0.0\r\n*/\r\nvar equalise = (function () {\r\n    var module = {};\r\n    var ATTR = 'data-equalise';\r\n\r\n    // Simplified debouncing function from John Hann\r\n    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/\r\n    var debounce = function (func) {\r\n        var timeout;\r\n\r\n        return function debounced() {\r\n            var obj = this, args = arguments;\r\n            function delayed() {\r\n                func.apply(obj, args);\r\n                timeout = null;\r\n            };\r\n\r\n            if (timeout)\r\n                clearTimeout(timeout);\r\n\r\n            timeout = setTimeout(delayed, 100);\r\n        };\r\n    };\r\n\r\n    window.onresize = debounce(init);\r\n\r\n    /** Run on start and resize, should also be triggeres on DOM changes. */\r\n    function init() {\r\n        var nodeList = document.querySelectorAll('[' + ATTR + ']');\r\n        var nodes = new Array();\r\n\r\n        for (var i = nodeList.length >>> 0; i--;) {\r\n            var node = nodeList[i];\r\n            var isVisible = (node.offsetWidth > 0 || node.offsetHeight > 0);\r\n\r\n            node.style.height = 'auto';\r\n            if (isVisible)\r\n                nodes.push(node);\r\n        }\r\n\r\n        processRow(nodes);\r\n    }\r\n\r\n    /** Finds and resizes the next row (recursive). */\r\n    function processRow(nodes) {\r\n        if (nodes.length < 1) return null;\r\n\r\n        var row = [];\r\n        var maxHeight = 0;\r\n        var nextNode = findNextNode(nodes);\r\n\r\n        var offset, node, group;\r\n\r\n        for (var i = nodes.length >>> 0; i--;) {\r\n            offset = getOffset(nodes[i]);\r\n            group = getGroup(nodes[i]);\r\n\r\n            if (offset == nextNode.offset && group == nextNode.group) {\r\n                node = nodes.splice(i, 1)[0];\r\n                row.push(node);\r\n                if (node.offsetHeight > maxHeight)\r\n                    maxHeight = node.offsetHeight;\r\n            }\r\n        }\r\n\r\n        if (row.length > 1)\r\n            for (var i = row.length >>> 0; i--;)\r\n                row[i].style.height = maxHeight + 'px';\r\n\r\n        if (nodes.length > 0)\r\n            processRow(nodes);\r\n    }\r\n\r\n    /** Searches an array of nodes for the uppermost element offset. */\r\n    function findNextNode(nodes) {\r\n        if (nodes.length < 1) return null;\r\n        var offset = getOffset(nodes[0]);\r\n        var group = getGroup(nodes[0]);\r\n        var thisOffset;\r\n\r\n        for (var i = nodes.length >>> 0; i--;) {\r\n            offset = getOffset(nodes[i]);\r\n            if (thisOffset < offset) {\r\n                offset = thisOffset;\r\n                group = getGroup(nodes[i]);\r\n            }\r\n        }\r\n\r\n        return {\r\n            offset: offset,\r\n            group: group\r\n        };\r\n    }\r\n\r\n    /** Get the upper offset of an individual node (for checking alignment) */\r\n    function getOffset(node) {\r\n        return node.getBoundingClientRect().top;\r\n    }\r\n\r\n    /** Get the group of a node */\r\n    function getGroup(node) {\r\n        return node.getAttribute(ATTR);\r\n    }\r\n\r\n    window.docReady(init);\r\n\r\n    module.init = init;\r\n    return module;\r\n}());\r\n\r\n// Reinitialise on window load, used to recalculate heights once images are loaded.\r\nwindow.onload = function () {\r\n    equalise.init();\r\n}","module.exports = {\r\n    init: function() {\r\n        $(\"footer .additional__button\").on('click', function (e) {\r\n            e.preventDefault();\r\n            var scrollPos;\r\n\r\n            $(this).toggleClass(\"additional__button--is-active\");\r\n\r\n            $(\"#additional\").toggle(2, function () {\r\n                scrollPos = $(\".additional__button\").offset().top - 10;\r\n                $('html, body').animate({ scrollTop: scrollPos }, 700);\r\n            });\r\n        });\r\n    }\r\n};\r\n","/**\r\n* @fileOverview Form field validation using data attributes\r\n* @author John Akerman [john.akerman@appius.com]\r\n* @version 0.1.0\r\n*/\r\n\r\n\"use strict\";\r\n\r\nvar FORMAT_VALIDATION_MSG_SELECTOR = 'data-formatvalidationmessage';\r\nvar VALIDATION_MSG_SELECTOR = 'data-validationmessage';\r\nvar REGEX_SELECTOR = 'data-validationregex';\r\nvar REQUIRED_SELECTOR = 'data-required';\r\nvar VALIDATABLE_SELECTOR = 'data-validatable';\r\n\r\nfunction validateAll () {\r\n    $('[' + VALIDATABLE_SELECTOR + ']').each(function() {\r\n        validateField($(this));\r\n    });\r\n}\r\n\r\nfunction validateDirty() {\r\n    var hiddenFields = $(\"#hfValidation\").val().split(\",\");\r\n    $.each(hiddenFields,function(index,elem) {\r\n        validateField($(\"#\" + elem));\r\n    });\r\n}\r\n\r\nfunction validateField($elem) {\r\n    validateField($elem);\r\n}\r\n\r\nfunction init() {\r\n    $('[' + VALIDATABLE_SELECTOR + ']').each(function() {\r\n        var $this = $(this);\r\n        $this.on(\"blur\", function() {\r\n            validateField($(this));\r\n        });\r\n    });\r\n}\r\n\r\n// A list of elements that have been focused is stored in a hidden input field\r\nfunction addElementValidationList($elem) {\r\n    var id = $elem.attr(\"id\");\r\n    var currentList = $(\"#hfValidation\").val();\r\n\r\n    if (currentList.indexOf(id) === -1) {\r\n        if (currentList.length !== 0) {\r\n            currentList += \",\";\r\n        }\r\n        currentList += $elem.attr(\"id\");\r\n        $(\"#hfValidation\").val(currentList);\r\n    }\r\n}\r\n\r\nfunction removeElementValidationList($elem) {\r\n    var id = $elem.attr(\"id\");\r\n    var currentList = $(\"#hfValidation\").val();\r\n\r\n    if (currentList === \",\") {\r\n        currentList = \"\";\r\n    } else {\r\n        currentList = currentList.replace(id, \"\");\r\n    }\r\n\r\n    currentList = currentList.replace(/\\,$/, '');\r\n    $(\"#hfValidation\").val(currentList);\r\n}\r\n\r\nfunction showError($elem, msg) {\r\n    var $elemParent = $elem.parents(\".form-group\");\r\n    addElementValidationList($elem);\r\n\r\n    if ($elem.hasClass(\"has-error\")) return; // If field already has an error set, don't show another.\r\n\r\n    $elemParent.addClass(\"has-error\");\r\n    $elem.addClass(\"has-error\");\r\n\r\n    // Create popup bubble with error message\r\n    $(\"<div class='bubble bubble--bottom bubble--ketchup'>\"+ msg  + \"</div>\").insertBefore($elemParent);\r\n}\r\n\r\nfunction hideError($elem) {\r\n    var $elemParent = $elem.parents(\".form-group\");\r\n\r\n    $elem.removeClass(\"has-error\");\r\n    $elemParent.removeClass(\"has-error\");\r\n    $elemParent.prev(\".bubble\").remove();\r\n\r\n    removeElementValidationList($elem);\r\n}\r\n\r\nfunction validateField($elem) {\r\n    var val = $elem.val();\r\n    var reg = $elem.attr(REGEX_SELECTOR);\r\n\r\n    // Check for select, if so only validate if its required and set to first item in index.\r\n    if ($elem.is(\"select\") && $elem.attr(REQUIRED_SELECTOR) === 'True') {\r\n        if ($elem[0].selectedIndex === 0) {\r\n            showError($elem, $elem.attr(VALIDATION_MSG_SELECTOR));\r\n        }\r\n        return;\r\n    }\r\n\r\n    if ($elem.attr(REQUIRED_SELECTOR) === 'True' && val.length === 0) {\r\n        showError($elem, $elem.attr(VALIDATION_MSG_SELECTOR));\r\n        return;\r\n    }\r\n\r\n    if (typeof $elem.attr(REGEX_SELECTOR) !== \"undefined\") {\r\n        var regFilter = new RegExp(reg, \"i\");\r\n        if (regFilter.test(val) === false) {\r\n            showError($elem, (FORMAT_VALIDATION_MSG_SELECTOR));\r\n            return;\r\n        }\r\n    }\r\n\r\n    // If no errors found, hide message\r\n    hideError($elem);\r\n}\r\n\r\nmodule.exports = {\r\n    validateAll : validateAll,\r\n    validateDirty: validateDirty,\r\n    validateField : validateField,\r\n    init: init\r\n};\r\n","module.exports = {\r\n    init: function() {\r\n        $(document).click(function (event) {\r\n            if (!$(event.target).closest(\".primary-nav__items\").length) {\r\n                if ($('.primary-nav__items.panel-open').length > 0) {\r\n                    $('.primary-nav__items .is-open').removeClass('is-open');\r\n                    $('primary-nav__items.panel-open').removeClass('panel-open');\r\n    \t\t\t\tpanelCheckOpenStatus();\r\n                }\r\n            }\r\n        });\r\n\r\n        $('.primary-nav li.dropdown .primary-nav__top-level').on('click', function () {\r\n            var $this = $(this);\r\n    \t\tvar $panel = $this.next('.primary-nav__panel');\r\n\r\n            // Panel is currently open, so close\r\n            if ($this.parent().hasClass('is-open')) {\r\n                $('.primary-nav li.dropdown').removeClass('is-open');\r\n    \t\t\t$panel.attr('style', '');\r\n    \t\t\tpanelCheckOpenStatus();\r\n            } else { // Panel is currently closed, so open\r\n    \t\t\tif (isMobile()) {\r\n    \t\t\t\tsetFlyoutHeight($panel);\r\n                    $('.primary-nav li.dropdown').removeClass('is-open');\r\n                    window.setTimeout(function() {\r\n        \t\t\t\t$this.parent().addClass('is-open');\r\n        \t\t\t\tpanelCheckOpenStatus();\r\n        \t\t\t}, 0);\r\n    \t\t\t} else {\r\n                    resetFlyoutHeight($panel);\r\n                    $('.primary-nav li.dropdown').removeClass('is-open');\r\n                    $this.parent().addClass('is-open');\r\n                    panelCheckOpenStatus();\r\n                }\r\n            }\r\n\r\n        }).children().click(function (e) {\r\n            e.stopPropagation();\r\n        });\r\n\r\n    \tfunction isMobile() {\r\n    \t\treturn ($(window).outerWidth() < 768);\r\n    \t}\r\n\r\n        function setFlyoutHeight($panel) {\r\n            $panel.attr('style', 'height: auto !important; transition: none !important');\r\n    \t\t$panel.attr('style', 'height: ' + $panel.outerHeight() + 'px');\r\n        }\r\n\r\n        function resetFlyoutHeight($panel) {\r\n            $panel.attr('style', '');\r\n        }\r\n\r\n    \tfunction panelCheckOpenStatus() {\r\n    \t\tif ($('.primary-nav li.dropdown.is-open').length > 0) {\r\n                $('.primary-nav__items').addClass('panel-open');\r\n            } else {\r\n                $('.primary-nav__items').removeClass('panel-open');\r\n            }\r\n    \t}\r\n    }\r\n};\r\n","\"use strict\";\r\nvar speed = 400;\r\n\r\nfunction checkErrors() {\r\n    if ($(\".has-error\").length !== 0) {\r\n        var $firstError = $(\".has-error\").eq(0);\r\n        var $bubbleError = $firstError.prev(\".bubble\");\r\n        var firstErrorOffset = $bubbleError.offset().top;\r\n        scrollToPosition(firstErrorOffset, null, -10);\r\n    }\r\n}\r\n\r\nfunction scrollToPosition(pos, hash, offset) {\r\n    if (typeof offset === \"undefined\") { offset = 0; }\r\n\r\n    $('html, body').animate({\r\n        scrollTop: (pos + offset)\r\n    }, {\r\n        speed: speed\r\n    }).promise().done(function () {\r\n        if (typeof hash !== undefined && hash !== null) {\r\n            window.location.hash = hash;\r\n        }\r\n    });\r\n}\r\n\r\nfunction init() {\r\n    var $scroll\t\t= $('html, body'),\r\n        $body\t\t= $scroll.filter('body');\r\n\r\n    $body.on('click.internal', '[href*=\"#\"]', function (event) {\r\n        var $a\t\t= $(event.target).closest('a'),\r\n            href\t= $a.attr('href'),\r\n            hash,\r\n            $target;\r\n\r\n        if (href.length) {\r\n            hash = href.substring(href.indexOf('#'));\r\n            $target = $(hash);\r\n        }\r\n        if ($target.length) {\r\n            event.preventDefault();\r\n            // $body.find('[data-toggle=\"navigation\"]').trigger('click.navigation.show-hide');\r\n            scrollToPosition($target.offset().top, hash);\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = {\r\n    checkErrors: checkErrors,\r\n    scrollToPosition: scrollToPosition,\r\n    init: init\r\n};\r\n","module.exports = {\r\n    init: function() {\r\n        $('.accordion-tabs-minimal').each(function () {\r\n            $(this).children('li').first().children('a').addClass('is-active').next().addClass('is-open').show();\r\n        });\r\n\r\n        $('.accordion-tabs-minimal').on('click', 'li > a.tab-link', function (event) {\r\n            if (!$(this).hasClass('is-active')) {\r\n                event.preventDefault();\r\n                var accordionTabs = $(this).closest('.accordion-tabs-minimal');\r\n                accordionTabs.find('.is-open').removeClass('is-open').hide();\r\n\r\n                $(this).next().toggleClass('is-open').toggle();\r\n                accordionTabs.find('.is-active').removeClass('is-active');\r\n                $(this).addClass('is-active');\r\n            } else {\r\n                event.preventDefault();\r\n            }\r\n        });\r\n\r\n        $('.js-accordion-trigger').on('click', function (event) {\r\n            $(this).parent().find('.submenu').slideToggle('fast');  // apply the toggle to the ul\r\n            $(this).parent().toggleClass('is-expanded');\r\n            event.preventDefault();\r\n        });\r\n    }\r\n};\r\n","module.exports = {\r\n    init: function() {\r\n    \tvar $letters = $('[data-alphabet=\"sg-letters\"]'),\r\n    \t\t\t$large = $('[data-alphabet=\"large\"]'),\r\n    \t\t\tid = 'typography-letters',\r\n    \t\t\tactiveClass = 'active',\r\n    \t\t\tenabled\t= $.fn.carousel,\r\n    \t\t\tprev = [],\r\n    \t\t\tnext = [],\r\n    \t\t\toptions\t= {\r\n    \t\t\t\tinterval: 2500,\r\n    \t\t\t\tpause: 'hover',\r\n    \t\t\t\twrap: true,\r\n    \t\t\t\tkeyboard: true\r\n    \t\t\t};\r\n\r\n    \tif (enabled) {\r\n    \t\t$letters.html(function(index, text) {\r\n    \t\t\tvar letters\t= text.split(''),\r\n    \t\t\t\t\thtml = [],\r\n    \t\t\t\t\tcarousel = [],\r\n    \t\t\t\t\ti\t= 0,\r\n    \t\t\t\t\tc\t= 0;\r\n\r\n    \t\t\tfor (i = 0; i < letters.length; i++) {\r\n    \t\t\t\tvar letter\t= letters[i];\r\n    \t\t\t\thtml[i]\t\t= '<a href=\"#\" data-letter=\"' + letter + '\" data-target=\"#' + id + '\" data-slide-to=\"' + i + '\" class=\"sg-letter' + (i === 0 ? ' ' + activeClass : '') + '\">' + letter + '</a>';\r\n    \t\t\t\tcarousel[c]\t= '<div data-letter=\"' + letter + '\" class=\"item' + (i === 0 ? ' ' + activeClass : '') + '\">' + letter + '</div>';\r\n    \t\t\t\tc++;\r\n    \t\t\t}\r\n\r\n    \t\t\t// set the carousel HTML\r\n    \t\t\t$large.html(carousel.join(''));\r\n\r\n    \t\t\treturn html.join('');\r\n    \t\t});\r\n\r\n    \t\tprev.push('<a data-slide=\"prev\" role=\"button\" href=\"#' + id + '\" class=\"left carousel-control\">');\r\n    \t\t\tprev.push('<span aria-hidden=\"true\" class=\"icon-prev\"></span>');\r\n    \t\t\tprev.push('<span class=\"sr-only\">Previous</span>');\r\n    \t\tprev.push('</a>');\r\n\r\n    \t\tnext.push('<a data-slide=\"next\" role=\"button\" href=\"#' + id + '\" class=\"right carousel-control\">');\r\n    \t\t\tnext.push('<span aria-hidden=\"true\" class=\"icon-next\"></span>');\r\n    \t\t\tnext.push('<span class=\"sr-only\">Next</span>');\r\n    \t\tnext.push('</a>');\r\n\r\n    \t\t$large.wrapInner('<div class=\"carousel-inner\"></div>').append(prev.join('')).append(next.join(''));\r\n    \t\t$large.attr('id', id).addClass('carousel slide').carousel(options).on('slide.bs.carousel', function (event) {\r\n    \t\t\tvar $current\t= $(event.relatedTarget),\r\n    \t\t\t\tindex\t\t= $current.index();\r\n\r\n    \t\t\t$letters.find('a').removeClass(activeClass).eq(index).addClass(activeClass);\r\n    \t\t}).on('slid.bs.carousel', function () {});\r\n    \t}\r\n    }\r\n};\r\n","module.exports = {\r\n    init: function() {\r\n        var activeClass = 'active';\r\n\r\n        $('.sg-help').each(function (i, element) {\r\n            var\t$help\t\t= $(element),\r\n            $sections\t= $help.find('.sg-help__section'),\r\n            html\t\t= [],\r\n            h\t\t\t= 0;\r\n\r\n            $sections.each(function (s, section) {\r\n                var $section\t= $(section),\r\n                title\t\t= $section.find('.sg-help__section__title').text(),\r\n                tab\t\t\t= $section.data('tab'),\r\n                classes\t\t= ['btn', 'btn--link'];\r\n\r\n                html[h++] = '<a class=\"' + classes.join(' ') + '\" data-toggle=\"collapse\" data-target=\"' + tab + '\" href=\"#' + tab + '\">' + title + '</a>';\r\n            });\r\n\r\n            $help.prepend('<div class=\"sg-help__nav btn-group\" data-count=\"' + h + '\">' + html.join('') + '</div>');\r\n        }).on('click.help', '.btn', function (event) {\r\n            var $button\t= $(event.target).closest('.btn'),\r\n            $group\t= $button.closest('.sg-help__nav'),\r\n            $help\t= $button.closest('.sg-help'),\r\n            target\t= $button.data('target'),\r\n            $target\t= $help.find('[data-tab=\"' + target + '\"]');\r\n\r\n            $group.find('.btn').removeClass(activeClass);\r\n            $target.siblings().removeClass(activeClass);\r\n\r\n            if ($target.is('.' + activeClass)) {\r\n                $target.add($button).removeClass(activeClass);\r\n            } else {\r\n                $target.add($button).addClass(activeClass);\r\n            }\r\n\r\n            event.preventDefault();\r\n        });\r\n    }\r\n};\r\n","module.exports = {\r\n    init: function() {\r\n    \tvar $body\t\t= $('body'),\r\n    \t\tbefore\t\t= $body.data('navigation-trigger') || '.logo',\r\n    \t\tshownClass\t= $body.data('navigation-class') || 'sidebar--shown',\r\n    \t\t$before\t\t= $(before),\r\n    \t\thtml\t\t= [],\r\n    \t\th\t\t\t= 0;\r\n\r\n    \thtml[h++] = '<button data-toggle=\"navigation\">';\r\n    \t\thtml[h++] = '<span></span>';\r\n    \t\thtml[h++] = '<span></span>';\r\n    \t\thtml[h++] = '<span></span>';\r\n    \thtml[h++] = '</button>';\r\n\r\n    \t$(html.join('')).insertBefore($before);\r\n\r\n    \t$body.on('click.navigation.show-hide', '[data-toggle=\"navigation\"]', function (event) {\r\n    \t\tif ($body.is('.' + shownClass)) {\r\n    \t\t\t$body.removeClass(shownClass);\r\n    \t\t} else {\r\n    \t\t\t$body.addClass(shownClass);\r\n    \t\t}\r\n\r\n    \t\tevent.preventDefault();\r\n    \t}).on('click.navigation.sub', '.nav__item--has-sub > a', function (event) {\r\n    \t\tvar $li\t= $(event.target).closest('.nav__item--has-sub'),\r\n    \t\t\t$ul\t= $li.children('ul');\r\n\r\n    \t\tif ($ul.is(':visible')) {\r\n    \t\t\t$ul.stop().slideUp();\r\n    \t\t} else {\r\n    \t\t\t$ul.stop().slideDown();\r\n    \t\t}\r\n\r\n    \t\tevent.preventDefault();\r\n    \t});\r\n    }\r\n};\r\n","module.exports = {\r\n    init: function() {\r\n        var $container\t= $('[data-show-hide=\"container\"]'),\r\n        html\t\t= [],\r\n        h\t\t\t= 0;\r\n\r\n        html[h++] = '<div class=\"btn-group\" data-show-hide=\"show-hide\">';\r\n        html[h++] = '<a href=\"#\" class=\"btn btn--small btn--link\" data-show-hide=\"show\">Show All</a>';\r\n        html[h++] = '<a href=\"#\" class=\"btn btn--small btn--link\" data-show-hide=\"hide\">Hide All</a>';\r\n        html[h++] = '</div>';\r\n\r\n        $container.on('click', '[data-show-hide=\"toggle\"]', function (event) {\r\n            var $toggle\t= $(event.target).closest('[data-show-hide=\"toggle\"]'),\r\n            $show\t= $toggle.parent().find('[data-show-hide=\"value\"]');\r\n\r\n            if ($show.is('[data-default=\"true\"]')) {\r\n                $show.attr('data-default', 'false');\r\n            } else {\r\n                $show.attr('data-default', 'true');\r\n            }\r\n\r\n            event.preventDefault();\r\n        }).each(function (i, element) {\r\n            $(element).append(html.join(''));\r\n        }).on('click', '[data-show-hide=\"show\"], [data-show-hide=\"hide\"]', function (event) {\r\n            var $link\t= $(event.target).closest('[data-show-hide=\"show\"], [data-show-hide=\"hide\"]'),\r\n            $c\t\t= $link.closest('[data-show-hide=\"container\"]'),\r\n            $values\t= $c.find('[data-show-hide=\"value\"]'),\r\n            type\t= $link.data('show-hide');\r\n\r\n            if (type === 'show') {\r\n                $values.attr('data-default', 'true');\r\n            } else if (type === 'hide') {\r\n                $values.attr('data-default', 'false');\r\n            }\r\n\r\n            event.preventDefault();\r\n        });\r\n\r\n        $('.expander-trigger').on('click', function () {\r\n    \t\t$(this).toggleClass(\"expander-hidden\");\r\n    \t});\r\n    }\r\n};\r\n","window.appius = {\r\n\tscroller: require('./_appius.scroller.js'),\r\n\tprimaryNav: require('./_appius.primaryNav.js'),\r\n\taccordion: require('./_sunlife.accordions.js'),\r\n\tshowHide: require('./_sunlife.showHide.js'),\r\n\thelp: require('./_sunlife.help.js'),\r\n\talphabetCarousel: require('./_sunlife.alphabetCarousel.js'),\r\n\tfooterToggle: require('./_appius.footerToggle.js'),\r\n\tnav: require('./_sunlife.nav.js')\r\n};\r\n\r\nï»¿require('./vendor/bootstrap.js');\r\nrequire('./_appius.equalise.js');\r\nrequire('./_appius.formRegexValidation.js');\r\n\r\n$(document).ready(function () {\r\n\tappius.scroller.init();\r\n\tappius.primaryNav.init();\r\n\tappius.accordion.init();\r\n\tappius.showHide.init();\r\n\tappius.help.init();\r\n\tappius.alphabetCarousel.init();\r\n\tappius.footerToggle.init();\r\n\tappius.nav.init();\r\n});\r\n","// require('./bootstrap/transition.js');\r\n// require('./bootstrap/alert.js');\r\n// require('./bootstrap/button.js');\r\nrequire('./bootstrap/carousel.js');\r\n// require('./bootstrap/collapse.js');\r\n// require('./bootstrap/dropdown.js');\r\n// require('./bootstrap/modal.js');\r\nrequire('./bootstrap/tab.js');\r\n// require('./bootstrap/affix.js');\r\n// require('./bootstrap/scrollspy.js');\r\n// require('./bootstrap/tooltip.js');\r\n// require('./bootstrap/popover.js');\r\n","/* ========================================================================\r\n * Bootstrap: carousel.js v3.3.7\r\n * http://getbootstrap.com/javascript/#carousel\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // CAROUSEL CLASS DEFINITION\r\n  // =========================\r\n\r\n  var Carousel = function (element, options) {\r\n    this.$element    = $(element)\r\n    this.$indicators = this.$element.find('.carousel-indicators')\r\n    this.options     = options\r\n    this.paused      = null\r\n    this.sliding     = null\r\n    this.interval    = null\r\n    this.$active     = null\r\n    this.$items      = null\r\n\r\n    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))\r\n\r\n    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\r\n      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))\r\n      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))\r\n  }\r\n\r\n  Carousel.VERSION  = '3.3.7'\r\n\r\n  Carousel.TRANSITION_DURATION = 600\r\n\r\n  Carousel.DEFAULTS = {\r\n    interval: 5000,\r\n    pause: 'hover',\r\n    wrap: true,\r\n    keyboard: true\r\n  }\r\n\r\n  Carousel.prototype.keydown = function (e) {\r\n    if (/input|textarea/i.test(e.target.tagName)) return\r\n    switch (e.which) {\r\n      case 37: this.prev(); break\r\n      case 39: this.next(); break\r\n      default: return\r\n    }\r\n\r\n    e.preventDefault()\r\n  }\r\n\r\n  Carousel.prototype.cycle = function (e) {\r\n    e || (this.paused = false)\r\n\r\n    this.interval && clearInterval(this.interval)\r\n\r\n    this.options.interval\r\n      && !this.paused\r\n      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\r\n\r\n    return this\r\n  }\r\n\r\n  Carousel.prototype.getItemIndex = function (item) {\r\n    this.$items = item.parent().children('.item')\r\n    return this.$items.index(item || this.$active)\r\n  }\r\n\r\n  Carousel.prototype.getItemForDirection = function (direction, active) {\r\n    var activeIndex = this.getItemIndex(active)\r\n    var willWrap = (direction == 'prev' && activeIndex === 0)\r\n                || (direction == 'next' && activeIndex == (this.$items.length - 1))\r\n    if (willWrap && !this.options.wrap) return active\r\n    var delta = direction == 'prev' ? -1 : 1\r\n    var itemIndex = (activeIndex + delta) % this.$items.length\r\n    return this.$items.eq(itemIndex)\r\n  }\r\n\r\n  Carousel.prototype.to = function (pos) {\r\n    var that        = this\r\n    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\r\n\r\n    if (pos > (this.$items.length - 1) || pos < 0) return\r\n\r\n    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, \"slid\"\r\n    if (activeIndex == pos) return this.pause().cycle()\r\n\r\n    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\r\n  }\r\n\r\n  Carousel.prototype.pause = function (e) {\r\n    e || (this.paused = true)\r\n\r\n    if (this.$element.find('.next, .prev').length && $.support.transition) {\r\n      this.$element.trigger($.support.transition.end)\r\n      this.cycle(true)\r\n    }\r\n\r\n    this.interval = clearInterval(this.interval)\r\n\r\n    return this\r\n  }\r\n\r\n  Carousel.prototype.next = function () {\r\n    if (this.sliding) return\r\n    return this.slide('next')\r\n  }\r\n\r\n  Carousel.prototype.prev = function () {\r\n    if (this.sliding) return\r\n    return this.slide('prev')\r\n  }\r\n\r\n  Carousel.prototype.slide = function (type, next) {\r\n    var $active   = this.$element.find('.item.active')\r\n    var $next     = next || this.getItemForDirection(type, $active)\r\n    var isCycling = this.interval\r\n    var direction = type == 'next' ? 'left' : 'right'\r\n    var that      = this\r\n\r\n    if ($next.hasClass('active')) return (this.sliding = false)\r\n\r\n    var relatedTarget = $next[0]\r\n    var slideEvent = $.Event('slide.bs.carousel', {\r\n      relatedTarget: relatedTarget,\r\n      direction: direction\r\n    })\r\n    this.$element.trigger(slideEvent)\r\n    if (slideEvent.isDefaultPrevented()) return\r\n\r\n    this.sliding = true\r\n\r\n    isCycling && this.pause()\r\n\r\n    if (this.$indicators.length) {\r\n      this.$indicators.find('.active').removeClass('active')\r\n      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\r\n      $nextIndicator && $nextIndicator.addClass('active')\r\n    }\r\n\r\n    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\r\n    if ($.support.transition && this.$element.hasClass('slide')) {\r\n      $next.addClass(type)\r\n      $next[0].offsetWidth // force reflow\r\n      $active.addClass(direction)\r\n      $next.addClass(direction)\r\n      $active\r\n        .one('bsTransitionEnd', function () {\r\n          $next.removeClass([type, direction].join(' ')).addClass('active')\r\n          $active.removeClass(['active', direction].join(' '))\r\n          that.sliding = false\r\n          setTimeout(function () {\r\n            that.$element.trigger(slidEvent)\r\n          }, 0)\r\n        })\r\n        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)\r\n    } else {\r\n      $active.removeClass('active')\r\n      $next.addClass('active')\r\n      this.sliding = false\r\n      this.$element.trigger(slidEvent)\r\n    }\r\n\r\n    isCycling && this.cycle()\r\n\r\n    return this\r\n  }\r\n\r\n\r\n  // CAROUSEL PLUGIN DEFINITION\r\n  // ==========================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this   = $(this)\r\n      var data    = $this.data('bs.carousel')\r\n      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\r\n      var action  = typeof option == 'string' ? option : options.slide\r\n\r\n      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))\r\n      if (typeof option == 'number') data.to(option)\r\n      else if (action) data[action]()\r\n      else if (options.interval) data.pause().cycle()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.carousel\r\n\r\n  $.fn.carousel             = Plugin\r\n  $.fn.carousel.Constructor = Carousel\r\n\r\n\r\n  // CAROUSEL NO CONFLICT\r\n  // ====================\r\n\r\n  $.fn.carousel.noConflict = function () {\r\n    $.fn.carousel = old\r\n    return this\r\n  }\r\n\r\n\r\n  // CAROUSEL DATA-API\r\n  // =================\r\n\r\n  var clickHandler = function (e) {\r\n    var href\r\n    var $this   = $(this)\r\n    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) // strip for ie7\r\n    if (!$target.hasClass('carousel')) return\r\n    var options = $.extend({}, $target.data(), $this.data())\r\n    var slideIndex = $this.attr('data-slide-to')\r\n    if (slideIndex) options.interval = false\r\n\r\n    Plugin.call($target, options)\r\n\r\n    if (slideIndex) {\r\n      $target.data('bs.carousel').to(slideIndex)\r\n    }\r\n\r\n    e.preventDefault()\r\n  }\r\n\r\n  $(document)\r\n    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)\r\n    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)\r\n\r\n  $(window).on('load', function () {\r\n    $('[data-ride=\"carousel\"]').each(function () {\r\n      var $carousel = $(this)\r\n      Plugin.call($carousel, $carousel.data())\r\n    })\r\n  })\r\n\r\n}(jQuery);\r\n","/* ========================================================================\r\n * Bootstrap: tab.js v3.3.7\r\n * http://getbootstrap.com/javascript/#tabs\r\n * ========================================================================\r\n * Copyright 2011-2016 Twitter, Inc.\r\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\r\n * ======================================================================== */\r\n\r\n\r\n+function ($) {\r\n  'use strict';\r\n\r\n  // TAB CLASS DEFINITION\r\n  // ====================\r\n\r\n  var Tab = function (element) {\r\n    // jscs:disable requireDollarBeforejQueryAssignment\r\n    this.element = $(element)\r\n    // jscs:enable requireDollarBeforejQueryAssignment\r\n  }\r\n\r\n  Tab.VERSION = '3.3.7'\r\n\r\n  Tab.TRANSITION_DURATION = 150\r\n\r\n  Tab.prototype.show = function () {\r\n    var $this    = this.element\r\n    var $ul      = $this.closest('ul:not(.dropdown-menu)')\r\n    var selector = $this.data('target')\r\n\r\n    if (!selector) {\r\n      selector = $this.attr('href')\r\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\r\n    }\r\n\r\n    if ($this.parent('li').hasClass('active')) return\r\n\r\n    var $previous = $ul.find('.active:last a')\r\n    var hideEvent = $.Event('hide.bs.tab', {\r\n      relatedTarget: $this[0]\r\n    })\r\n    var showEvent = $.Event('show.bs.tab', {\r\n      relatedTarget: $previous[0]\r\n    })\r\n\r\n    $previous.trigger(hideEvent)\r\n    $this.trigger(showEvent)\r\n\r\n    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return\r\n\r\n    var $target = $(selector)\r\n\r\n    this.activate($this.closest('li'), $ul)\r\n    this.activate($target, $target.parent(), function () {\r\n      $previous.trigger({\r\n        type: 'hidden.bs.tab',\r\n        relatedTarget: $this[0]\r\n      })\r\n      $this.trigger({\r\n        type: 'shown.bs.tab',\r\n        relatedTarget: $previous[0]\r\n      })\r\n    })\r\n  }\r\n\r\n  Tab.prototype.activate = function (element, container, callback) {\r\n    var $active    = container.find('> .active')\r\n    var transition = callback\r\n      && $.support.transition\r\n      && ($active.length && $active.hasClass('fade') || !!container.find('> .fade').length)\r\n\r\n    function next() {\r\n      $active\r\n        .removeClass('active')\r\n        .find('> .dropdown-menu > .active')\r\n          .removeClass('active')\r\n        .end()\r\n        .find('[data-toggle=\"tab\"]')\r\n          .attr('aria-expanded', false)\r\n\r\n      element\r\n        .addClass('active')\r\n        .find('[data-toggle=\"tab\"]')\r\n          .attr('aria-expanded', true)\r\n\r\n      if (transition) {\r\n        element[0].offsetWidth // reflow for transition\r\n        element.addClass('in')\r\n      } else {\r\n        element.removeClass('fade')\r\n      }\r\n\r\n      if (element.parent('.dropdown-menu').length) {\r\n        element\r\n          .closest('li.dropdown')\r\n            .addClass('active')\r\n          .end()\r\n          .find('[data-toggle=\"tab\"]')\r\n            .attr('aria-expanded', true)\r\n      }\r\n\r\n      callback && callback()\r\n    }\r\n\r\n    $active.length && transition ?\r\n      $active\r\n        .one('bsTransitionEnd', next)\r\n        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :\r\n      next()\r\n\r\n    $active.removeClass('in')\r\n  }\r\n\r\n\r\n  // TAB PLUGIN DEFINITION\r\n  // =====================\r\n\r\n  function Plugin(option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n      var data  = $this.data('bs.tab')\r\n\r\n      if (!data) $this.data('bs.tab', (data = new Tab(this)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  var old = $.fn.tab\r\n\r\n  $.fn.tab             = Plugin\r\n  $.fn.tab.Constructor = Tab\r\n\r\n\r\n  // TAB NO CONFLICT\r\n  // ===============\r\n\r\n  $.fn.tab.noConflict = function () {\r\n    $.fn.tab = old\r\n    return this\r\n  }\r\n\r\n\r\n  // TAB DATA-API\r\n  // ============\r\n\r\n  var clickHandler = function (e) {\r\n    e.preventDefault()\r\n    Plugin.call($(this), 'show')\r\n  }\r\n\r\n  $(document)\r\n    .on('click.bs.tab.data-api', '[data-toggle=\"tab\"]', clickHandler)\r\n    .on('click.bs.tab.data-api', '[data-toggle=\"pill\"]', clickHandler)\r\n\r\n}(jQuery);\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9fYXBwaXVzLmVxdWFsaXNlLmpzIiwic3JjL3NjcmlwdHMvX2FwcGl1cy5mb290ZXJUb2dnbGUuanMiLCJzcmMvc2NyaXB0cy9fYXBwaXVzLmZvcm1SZWdleFZhbGlkYXRpb24uanMiLCJzcmMvc2NyaXB0cy9fYXBwaXVzLnByaW1hcnlOYXYuanMiLCJzcmMvc2NyaXB0cy9fYXBwaXVzLnNjcm9sbGVyLmpzIiwic3JjL3NjcmlwdHMvX3N1bmxpZmUuYWNjb3JkaW9ucy5qcyIsInNyYy9zY3JpcHRzL19zdW5saWZlLmFscGhhYmV0Q2Fyb3VzZWwuanMiLCJzcmMvc2NyaXB0cy9fc3VubGlmZS5oZWxwLmpzIiwic3JjL3NjcmlwdHMvX3N1bmxpZmUubmF2LmpzIiwic3JjL3NjcmlwdHMvX3N1bmxpZmUuc2hvd0hpZGUuanMiLCJzcmMvc2NyaXB0cy9zdHlsZWd1aWRlLmpzIiwic3JjL3NjcmlwdHMvdmVuZG9yL2Jvb3RzdHJhcC5qcyIsInNyYy9zY3JpcHRzL3ZlbmRvci9ib290c3RyYXAvY2Fyb3VzZWwuanMiLCJzcmMvc2NyaXB0cy92ZW5kb3IvYm9vdHN0cmFwL3RhYi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN09BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgYXBwaXVzID0gYXBwaXVzIHx8IHt9O1xyXG52YXIgbW9kdWxlUGx1Z2luID0ge31cclxuXHJcbi8vIENoZWNrIHRvIHNlZSBpZiBwbHVnaW5zIGFycmF5IGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC5cclxuaWYgKHR5cGVvZiBhcHBpdXMucGx1Z2lucyA9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICBhcHBpdXMucGx1Z2lucyA9IFtdO1xyXG59XHJcblxyXG4vLyBDcmVhdGUgb2JqZWN0IG9mIHRoZSBjdXJyZW50IHBsdWdpbiBkZXRhaWxzXHJcbm1vZHVsZVBsdWdpbiA9IHtcclxuICAgIHZlcnNpb246ICcxLjAuMCcsXHJcbiAgICBhdXRob3JzOiAnUGhpbCBIYXplbHRvbicsXHJcbiAgICBuYW1lOiAnRXF1YWxpc2VyJyxcclxuICAgIGZpbGVuYW1lOiAnZXF1YWxpc2UuanMnLFxyXG4gICAgZGVzY3JpcHRpb246ICdQcm92aWRlcyBzdXBwb3J0IGZvciB0aGUgZXF1YWwtaGVpZ2h0IGhlbHBlciBhdHRyaWJ1dGUgXCJkYXRhLWVxdWFsXCIuIFVzZSBkaWZmZXJlbnQgdmFsdWVzIHRvIGNyZWF0aW5nIHVuaXF1ZSBcImdyb3VwaW5nc1wiIG9mIGVsZW1lbnRzLiBMYXlvdXQgaXMgYWRqdXN0ZWQgYXV0b21hdGljYWxseSBvbiByZXNpemUgYmFzZWQgb24gZWxlbWVudCBvZmZzZXRzLCBub3Qgc291cmNlIG9yZGVyLiBDYWxsIGluaXQoKSB0byByZXNpemUgYWZ0ZXIgbWFya3VwIGNoYW5nZXMgKGUuZy4gb24gYWNjb3JkaW9ucykuJ1xyXG59O1xyXG5hcHBpdXMucGx1Z2lucy5wdXNoKG1vZHVsZVBsdWdpbik7XHJcblxyXG5cclxuXHJcbi8qKiBxdWVyeVNlbGVjdG9yQWxsIHBvbHlmaWxsIChJRTYvNykgKi9cclxuaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsID0gZnVuY3Rpb24gKHNlbGVjdG9ycykge1xyXG4gICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyksIGVsZW1lbnRzID0gW10sIGVsZW1lbnQ7XHJcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmZpcnN0Q2hpbGQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICAgIGRvY3VtZW50Ll9xc2EgPSBbXTtcclxuXHJcbiAgICAgICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gc2VsZWN0b3JzICsgJ3t4LXFzYTpleHByZXNzaW9uKGRvY3VtZW50Ll9xc2EgJiYgZG9jdW1lbnQuX3FzYS5wdXNoKHRoaXMpKX0nO1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeSgwLCAwKTtcclxuICAgICAgICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcclxuXHJcbiAgICAgICAgd2hpbGUgKGRvY3VtZW50Ll9xc2EubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5fcXNhLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucmVtb3ZlQXR0cmlidXRlKCd4LXFzYScpO1xyXG4gICAgICAgICAgICBlbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkb2N1bWVudC5fcXNhID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gZWxlbWVudHM7XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKiogQ3Jvc3MtYnJvd3NlciBkb2N1bWVudC5yZWFkeSBoYW5kbGVyICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICB2YXIgcmVhZHlMaXN0ID0gW10sXHJcbiAgICByZWFkeUZpcmVkID0gZmFsc2UsXHJcbiAgICByZWFkeUV2ZW50SGFuZGxlcnNJbnN0YWxsZWQgPSBmYWxzZTtcclxuXHJcbiAgICBmdW5jdGlvbiByZWFkeSgpIHtcclxuICAgICAgICBpZiAocmVhZHlGaXJlZCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIHJlYWR5RmlyZWQgPSB0cnVlO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVhZHlMaXN0Lmxlbmd0aDsgaSsrKSByZWFkeUxpc3RbaV0uY2FsbCh3aW5kb3cpO1xyXG4gICAgICAgIHJlYWR5TGlzdCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5kb2NSZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIGlmIChyZWFkeUZpcmVkKSByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgMSksIG51bGw7XHJcblxyXG4gICAgICAgIHJlYWR5TGlzdC5wdXNoKGNhbGxiYWNrKTtcclxuXHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgfHwgKCFkb2N1bWVudC5hdHRhY2hFdmVudCAmJiBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnKSlcclxuICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQocmVhZHksIDEpLCBudWxsO1xyXG5cclxuICAgICAgICBpZiAoIXJlYWR5RXZlbnRIYW5kbGVyc0luc3RhbGxlZCkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHJlYWR5LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlYWR5LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICdjb21wbGV0ZScpIHJlYWR5KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb25sb2FkJywgcmVhZHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlYWR5RXZlbnRIYW5kbGVyc0luc3RhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkoKTtcclxuXHJcblxyXG4vKipcclxuKiBAZmlsZU92ZXJ2aWV3IFByb3ZpZGVzIHN1cHBvcnQgZm9yIHRoZSBlcXVhbC1oZWlnaHQgaGVscGVyIGF0dHJpYnV0ZSBcImRhdGEtZXF1YWxcIlxyXG4qICAgVXNlIGRpZmZlcmVudCB2YWx1ZXMgdG8gY3JlYXRpbmcgdW5pcXVlIFwiZ3JvdXBpbmdzXCIgb2YgZWxlbWVudHMuIExheW91dCBpc1xyXG4qICAgYWRqdXN0ZWQgYXV0b21hdGljYWxseSBvbiByZXNpemUgYmFzZWQgb24gZWxlbWVudCBvZmZzZXRzLCBub3Qgc291cmNlIG9yZGVyLlxyXG4qICAgQ2FsbCBpbml0KCkgdG8gcmVzaXplIGFmdGVyIG1hcmt1cCBjaGFuZ2VzIChlLmcuIG9uIGFjY29yZGlvbnMpLlxyXG4qIEBhdXRob3IgUGhpbCBIYXplbHRvbiBbcGhpbEBhcHBpdXMuY29tXVxyXG4qIEB2ZXJzaW9uIDEuMC4wXHJcbiovXHJcbnZhciBlcXVhbGlzZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0ge307XHJcbiAgICB2YXIgQVRUUiA9ICdkYXRhLWVxdWFsaXNlJztcclxuXHJcbiAgICAvLyBTaW1wbGlmaWVkIGRlYm91bmNpbmcgZnVuY3Rpb24gZnJvbSBKb2huIEhhbm5cclxuICAgIC8vIGh0dHA6Ly91bnNjcmlwdGFibGUuY29tL2luZGV4LnBocC8yMDA5LzAzLzIwL2RlYm91bmNpbmctamF2YXNjcmlwdC1tZXRob2RzL1xyXG4gICAgdmFyIGRlYm91bmNlID0gZnVuY3Rpb24gKGZ1bmMpIHtcclxuICAgICAgICB2YXIgdGltZW91dDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGF5ZWQoKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KG9iaiwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aW1lb3V0KVxyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cclxuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZGVsYXllZCwgMTAwKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cub25yZXNpemUgPSBkZWJvdW5jZShpbml0KTtcclxuXHJcbiAgICAvKiogUnVuIG9uIHN0YXJ0IGFuZCByZXNpemUsIHNob3VsZCBhbHNvIGJlIHRyaWdnZXJlcyBvbiBET00gY2hhbmdlcy4gKi9cclxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgdmFyIG5vZGVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycgKyBBVFRSICsgJ10nKTtcclxuICAgICAgICB2YXIgbm9kZXMgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IG5vZGVMaXN0Lmxlbmd0aCA+Pj4gMDsgaS0tOykge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IG5vZGVMaXN0W2ldO1xyXG4gICAgICAgICAgICB2YXIgaXNWaXNpYmxlID0gKG5vZGUub2Zmc2V0V2lkdGggPiAwIHx8IG5vZGUub2Zmc2V0SGVpZ2h0ID4gMCk7XHJcblxyXG4gICAgICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcclxuICAgICAgICAgICAgaWYgKGlzVmlzaWJsZSlcclxuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm9jZXNzUm93KG5vZGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogRmluZHMgYW5kIHJlc2l6ZXMgdGhlIG5leHQgcm93IChyZWN1cnNpdmUpLiAqL1xyXG4gICAgZnVuY3Rpb24gcHJvY2Vzc1Jvdyhub2Rlcykge1xyXG4gICAgICAgIGlmIChub2Rlcy5sZW5ndGggPCAxKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgdmFyIHJvdyA9IFtdO1xyXG4gICAgICAgIHZhciBtYXhIZWlnaHQgPSAwO1xyXG4gICAgICAgIHZhciBuZXh0Tm9kZSA9IGZpbmROZXh0Tm9kZShub2Rlcyk7XHJcblxyXG4gICAgICAgIHZhciBvZmZzZXQsIG5vZGUsIGdyb3VwO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gbm9kZXMubGVuZ3RoID4+PiAwOyBpLS07KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IGdldE9mZnNldChub2Rlc1tpXSk7XHJcbiAgICAgICAgICAgIGdyb3VwID0gZ2V0R3JvdXAobm9kZXNbaV0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9mZnNldCA9PSBuZXh0Tm9kZS5vZmZzZXQgJiYgZ3JvdXAgPT0gbmV4dE5vZGUuZ3JvdXApIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2Rlcy5zcGxpY2UoaSwgMSlbMF07XHJcbiAgICAgICAgICAgICAgICByb3cucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLm9mZnNldEhlaWdodCA+IG1heEhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSBub2RlLm9mZnNldEhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJvdy5sZW5ndGggPiAxKVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gcm93Lmxlbmd0aCA+Pj4gMDsgaS0tOylcclxuICAgICAgICAgICAgICAgIHJvd1tpXS5zdHlsZS5oZWlnaHQgPSBtYXhIZWlnaHQgKyAncHgnO1xyXG5cclxuICAgICAgICBpZiAobm9kZXMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgcHJvY2Vzc1Jvdyhub2Rlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFNlYXJjaGVzIGFuIGFycmF5IG9mIG5vZGVzIGZvciB0aGUgdXBwZXJtb3N0IGVsZW1lbnQgb2Zmc2V0LiAqL1xyXG4gICAgZnVuY3Rpb24gZmluZE5leHROb2RlKG5vZGVzKSB7XHJcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA8IDEpIHJldHVybiBudWxsO1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSBnZXRPZmZzZXQobm9kZXNbMF0pO1xyXG4gICAgICAgIHZhciBncm91cCA9IGdldEdyb3VwKG5vZGVzWzBdKTtcclxuICAgICAgICB2YXIgdGhpc09mZnNldDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IG5vZGVzLmxlbmd0aCA+Pj4gMDsgaS0tOykge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSBnZXRPZmZzZXQobm9kZXNbaV0pO1xyXG4gICAgICAgICAgICBpZiAodGhpc09mZnNldCA8IG9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGhpc09mZnNldDtcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gZ2V0R3JvdXAobm9kZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvZmZzZXQ6IG9mZnNldCxcclxuICAgICAgICAgICAgZ3JvdXA6IGdyb3VwXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogR2V0IHRoZSB1cHBlciBvZmZzZXQgb2YgYW4gaW5kaXZpZHVhbCBub2RlIChmb3IgY2hlY2tpbmcgYWxpZ25tZW50KSAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0T2Zmc2V0KG5vZGUpIHtcclxuICAgICAgICByZXR1cm4gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldCB0aGUgZ3JvdXAgb2YgYSBub2RlICovXHJcbiAgICBmdW5jdGlvbiBnZXRHcm91cChub2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKEFUVFIpO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5kb2NSZWFkeShpbml0KTtcclxuXHJcbiAgICBtb2R1bGUuaW5pdCA9IGluaXQ7XHJcbiAgICByZXR1cm4gbW9kdWxlO1xyXG59KCkpO1xyXG5cclxuLy8gUmVpbml0aWFsaXNlIG9uIHdpbmRvdyBsb2FkLCB1c2VkIHRvIHJlY2FsY3VsYXRlIGhlaWdodHMgb25jZSBpbWFnZXMgYXJlIGxvYWRlZC5cclxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGVxdWFsaXNlLmluaXQoKTtcclxufSIsIm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJChcImZvb3RlciAuYWRkaXRpb25hbF9fYnV0dG9uXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIHNjcm9sbFBvcztcclxuXHJcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoXCJhZGRpdGlvbmFsX19idXR0b24tLWlzLWFjdGl2ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICQoXCIjYWRkaXRpb25hbFwiKS50b2dnbGUoMiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsUG9zID0gJChcIi5hZGRpdGlvbmFsX19idXR0b25cIikub2Zmc2V0KCkudG9wIC0gMTA7XHJcbiAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogc2Nyb2xsUG9zIH0sIDcwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG4iLCIvKipcclxuKiBAZmlsZU92ZXJ2aWV3IEZvcm0gZmllbGQgdmFsaWRhdGlvbiB1c2luZyBkYXRhIGF0dHJpYnV0ZXNcclxuKiBAYXV0aG9yIEpvaG4gQWtlcm1hbiBbam9obi5ha2VybWFuQGFwcGl1cy5jb21dXHJcbiogQHZlcnNpb24gMC4xLjBcclxuKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIEZPUk1BVF9WQUxJREFUSU9OX01TR19TRUxFQ1RPUiA9ICdkYXRhLWZvcm1hdHZhbGlkYXRpb25tZXNzYWdlJztcclxudmFyIFZBTElEQVRJT05fTVNHX1NFTEVDVE9SID0gJ2RhdGEtdmFsaWRhdGlvbm1lc3NhZ2UnO1xyXG52YXIgUkVHRVhfU0VMRUNUT1IgPSAnZGF0YS12YWxpZGF0aW9ucmVnZXgnO1xyXG52YXIgUkVRVUlSRURfU0VMRUNUT1IgPSAnZGF0YS1yZXF1aXJlZCc7XHJcbnZhciBWQUxJREFUQUJMRV9TRUxFQ1RPUiA9ICdkYXRhLXZhbGlkYXRhYmxlJztcclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlQWxsICgpIHtcclxuICAgICQoJ1snICsgVkFMSURBVEFCTEVfU0VMRUNUT1IgKyAnXScpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFsaWRhdGVGaWVsZCgkKHRoaXMpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZURpcnR5KCkge1xyXG4gICAgdmFyIGhpZGRlbkZpZWxkcyA9ICQoXCIjaGZWYWxpZGF0aW9uXCIpLnZhbCgpLnNwbGl0KFwiLFwiKTtcclxuICAgICQuZWFjaChoaWRkZW5GaWVsZHMsZnVuY3Rpb24oaW5kZXgsZWxlbSkge1xyXG4gICAgICAgIHZhbGlkYXRlRmllbGQoJChcIiNcIiArIGVsZW0pKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUZpZWxkKCRlbGVtKSB7XHJcbiAgICB2YWxpZGF0ZUZpZWxkKCRlbGVtKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICQoJ1snICsgVkFMSURBVEFCTEVfU0VMRUNUT1IgKyAnXScpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAkdGhpcy5vbihcImJsdXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlRmllbGQoJCh0aGlzKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gQSBsaXN0IG9mIGVsZW1lbnRzIHRoYXQgaGF2ZSBiZWVuIGZvY3VzZWQgaXMgc3RvcmVkIGluIGEgaGlkZGVuIGlucHV0IGZpZWxkXHJcbmZ1bmN0aW9uIGFkZEVsZW1lbnRWYWxpZGF0aW9uTGlzdCgkZWxlbSkge1xyXG4gICAgdmFyIGlkID0gJGVsZW0uYXR0cihcImlkXCIpO1xyXG4gICAgdmFyIGN1cnJlbnRMaXN0ID0gJChcIiNoZlZhbGlkYXRpb25cIikudmFsKCk7XHJcblxyXG4gICAgaWYgKGN1cnJlbnRMaXN0LmluZGV4T2YoaWQpID09PSAtMSkge1xyXG4gICAgICAgIGlmIChjdXJyZW50TGlzdC5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgY3VycmVudExpc3QgKz0gXCIsXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnRMaXN0ICs9ICRlbGVtLmF0dHIoXCJpZFwiKTtcclxuICAgICAgICAkKFwiI2hmVmFsaWRhdGlvblwiKS52YWwoY3VycmVudExpc3QpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVFbGVtZW50VmFsaWRhdGlvbkxpc3QoJGVsZW0pIHtcclxuICAgIHZhciBpZCA9ICRlbGVtLmF0dHIoXCJpZFwiKTtcclxuICAgIHZhciBjdXJyZW50TGlzdCA9ICQoXCIjaGZWYWxpZGF0aW9uXCIpLnZhbCgpO1xyXG5cclxuICAgIGlmIChjdXJyZW50TGlzdCA9PT0gXCIsXCIpIHtcclxuICAgICAgICBjdXJyZW50TGlzdCA9IFwiXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGN1cnJlbnRMaXN0ID0gY3VycmVudExpc3QucmVwbGFjZShpZCwgXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY3VycmVudExpc3QgPSBjdXJyZW50TGlzdC5yZXBsYWNlKC9cXCwkLywgJycpO1xyXG4gICAgJChcIiNoZlZhbGlkYXRpb25cIikudmFsKGN1cnJlbnRMaXN0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0Vycm9yKCRlbGVtLCBtc2cpIHtcclxuICAgIHZhciAkZWxlbVBhcmVudCA9ICRlbGVtLnBhcmVudHMoXCIuZm9ybS1ncm91cFwiKTtcclxuICAgIGFkZEVsZW1lbnRWYWxpZGF0aW9uTGlzdCgkZWxlbSk7XHJcblxyXG4gICAgaWYgKCRlbGVtLmhhc0NsYXNzKFwiaGFzLWVycm9yXCIpKSByZXR1cm47IC8vIElmIGZpZWxkIGFscmVhZHkgaGFzIGFuIGVycm9yIHNldCwgZG9uJ3Qgc2hvdyBhbm90aGVyLlxyXG5cclxuICAgICRlbGVtUGFyZW50LmFkZENsYXNzKFwiaGFzLWVycm9yXCIpO1xyXG4gICAgJGVsZW0uYWRkQ2xhc3MoXCJoYXMtZXJyb3JcIik7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHBvcHVwIGJ1YmJsZSB3aXRoIGVycm9yIG1lc3NhZ2VcclxuICAgICQoXCI8ZGl2IGNsYXNzPSdidWJibGUgYnViYmxlLS1ib3R0b20gYnViYmxlLS1rZXRjaHVwJz5cIisgbXNnICArIFwiPC9kaXY+XCIpLmluc2VydEJlZm9yZSgkZWxlbVBhcmVudCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVFcnJvcigkZWxlbSkge1xyXG4gICAgdmFyICRlbGVtUGFyZW50ID0gJGVsZW0ucGFyZW50cyhcIi5mb3JtLWdyb3VwXCIpO1xyXG5cclxuICAgICRlbGVtLnJlbW92ZUNsYXNzKFwiaGFzLWVycm9yXCIpO1xyXG4gICAgJGVsZW1QYXJlbnQucmVtb3ZlQ2xhc3MoXCJoYXMtZXJyb3JcIik7XHJcbiAgICAkZWxlbVBhcmVudC5wcmV2KFwiLmJ1YmJsZVwiKS5yZW1vdmUoKTtcclxuXHJcbiAgICByZW1vdmVFbGVtZW50VmFsaWRhdGlvbkxpc3QoJGVsZW0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUZpZWxkKCRlbGVtKSB7XHJcbiAgICB2YXIgdmFsID0gJGVsZW0udmFsKCk7XHJcbiAgICB2YXIgcmVnID0gJGVsZW0uYXR0cihSRUdFWF9TRUxFQ1RPUik7XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIHNlbGVjdCwgaWYgc28gb25seSB2YWxpZGF0ZSBpZiBpdHMgcmVxdWlyZWQgYW5kIHNldCB0byBmaXJzdCBpdGVtIGluIGluZGV4LlxyXG4gICAgaWYgKCRlbGVtLmlzKFwic2VsZWN0XCIpICYmICRlbGVtLmF0dHIoUkVRVUlSRURfU0VMRUNUT1IpID09PSAnVHJ1ZScpIHtcclxuICAgICAgICBpZiAoJGVsZW1bMF0uc2VsZWN0ZWRJbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzaG93RXJyb3IoJGVsZW0sICRlbGVtLmF0dHIoVkFMSURBVElPTl9NU0dfU0VMRUNUT1IpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkZWxlbS5hdHRyKFJFUVVJUkVEX1NFTEVDVE9SKSA9PT0gJ1RydWUnICYmIHZhbC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBzaG93RXJyb3IoJGVsZW0sICRlbGVtLmF0dHIoVkFMSURBVElPTl9NU0dfU0VMRUNUT1IpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiAkZWxlbS5hdHRyKFJFR0VYX1NFTEVDVE9SKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgIHZhciByZWdGaWx0ZXIgPSBuZXcgUmVnRXhwKHJlZywgXCJpXCIpO1xyXG4gICAgICAgIGlmIChyZWdGaWx0ZXIudGVzdCh2YWwpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBzaG93RXJyb3IoJGVsZW0sIChGT1JNQVRfVkFMSURBVElPTl9NU0dfU0VMRUNUT1IpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBubyBlcnJvcnMgZm91bmQsIGhpZGUgbWVzc2FnZVxyXG4gICAgaGlkZUVycm9yKCRlbGVtKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICB2YWxpZGF0ZUFsbCA6IHZhbGlkYXRlQWxsLFxyXG4gICAgdmFsaWRhdGVEaXJ0eTogdmFsaWRhdGVEaXJ0eSxcclxuICAgIHZhbGlkYXRlRmllbGQgOiB2YWxpZGF0ZUZpZWxkLFxyXG4gICAgaW5pdDogaW5pdFxyXG59O1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoISQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiLnByaW1hcnktbmF2X19pdGVtc1wiKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkKCcucHJpbWFyeS1uYXZfX2l0ZW1zLnBhbmVsLW9wZW4nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByaW1hcnktbmF2X19pdGVtcyAuaXMtb3BlbicpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgncHJpbWFyeS1uYXZfX2l0ZW1zLnBhbmVsLW9wZW4nKS5yZW1vdmVDbGFzcygncGFuZWwtb3BlbicpO1xyXG4gICAgXHRcdFx0XHRwYW5lbENoZWNrT3BlblN0YXR1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5wcmltYXJ5LW5hdiBsaS5kcm9wZG93biAucHJpbWFyeS1uYXZfX3RvcC1sZXZlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgIFx0XHR2YXIgJHBhbmVsID0gJHRoaXMubmV4dCgnLnByaW1hcnktbmF2X19wYW5lbCcpO1xyXG5cclxuICAgICAgICAgICAgLy8gUGFuZWwgaXMgY3VycmVudGx5IG9wZW4sIHNvIGNsb3NlXHJcbiAgICAgICAgICAgIGlmICgkdGhpcy5wYXJlbnQoKS5oYXNDbGFzcygnaXMtb3BlbicpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucHJpbWFyeS1uYXYgbGkuZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xyXG4gICAgXHRcdFx0JHBhbmVsLmF0dHIoJ3N0eWxlJywgJycpO1xyXG4gICAgXHRcdFx0cGFuZWxDaGVja09wZW5TdGF0dXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gUGFuZWwgaXMgY3VycmVudGx5IGNsb3NlZCwgc28gb3BlblxyXG4gICAgXHRcdFx0aWYgKGlzTW9iaWxlKCkpIHtcclxuICAgIFx0XHRcdFx0c2V0Rmx5b3V0SGVpZ2h0KCRwYW5lbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLnByaW1hcnktbmF2IGxpLmRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ2lzLW9wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICBcdFx0XHRcdCR0aGlzLnBhcmVudCgpLmFkZENsYXNzKCdpcy1vcGVuJyk7XHJcbiAgICAgICAgXHRcdFx0XHRwYW5lbENoZWNrT3BlblN0YXR1cygpO1xyXG4gICAgICAgIFx0XHRcdH0sIDApO1xyXG4gICAgXHRcdFx0fSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNldEZseW91dEhlaWdodCgkcGFuZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5wcmltYXJ5LW5hdiBsaS5kcm9wZG93bicpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucGFyZW50KCkuYWRkQ2xhc3MoJ2lzLW9wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICBwYW5lbENoZWNrT3BlblN0YXR1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBcdGZ1bmN0aW9uIGlzTW9iaWxlKCkge1xyXG4gICAgXHRcdHJldHVybiAoJCh3aW5kb3cpLm91dGVyV2lkdGgoKSA8IDc2OCk7XHJcbiAgICBcdH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Rmx5b3V0SGVpZ2h0KCRwYW5lbCkge1xyXG4gICAgICAgICAgICAkcGFuZWwuYXR0cignc3R5bGUnLCAnaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7IHRyYW5zaXRpb246IG5vbmUgIWltcG9ydGFudCcpO1xyXG4gICAgXHRcdCRwYW5lbC5hdHRyKCdzdHlsZScsICdoZWlnaHQ6ICcgKyAkcGFuZWwub3V0ZXJIZWlnaHQoKSArICdweCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRGbHlvdXRIZWlnaHQoJHBhbmVsKSB7XHJcbiAgICAgICAgICAgICRwYW5lbC5hdHRyKCdzdHlsZScsICcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgXHRmdW5jdGlvbiBwYW5lbENoZWNrT3BlblN0YXR1cygpIHtcclxuICAgIFx0XHRpZiAoJCgnLnByaW1hcnktbmF2IGxpLmRyb3Bkb3duLmlzLW9wZW4nKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcucHJpbWFyeS1uYXZfX2l0ZW1zJykuYWRkQ2xhc3MoJ3BhbmVsLW9wZW4nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJy5wcmltYXJ5LW5hdl9faXRlbXMnKS5yZW1vdmVDbGFzcygncGFuZWwtb3BlbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcdH1cclxuICAgIH1cclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBzcGVlZCA9IDQwMDtcclxuXHJcbmZ1bmN0aW9uIGNoZWNrRXJyb3JzKCkge1xyXG4gICAgaWYgKCQoXCIuaGFzLWVycm9yXCIpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIHZhciAkZmlyc3RFcnJvciA9ICQoXCIuaGFzLWVycm9yXCIpLmVxKDApO1xyXG4gICAgICAgIHZhciAkYnViYmxlRXJyb3IgPSAkZmlyc3RFcnJvci5wcmV2KFwiLmJ1YmJsZVwiKTtcclxuICAgICAgICB2YXIgZmlyc3RFcnJvck9mZnNldCA9ICRidWJibGVFcnJvci5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgc2Nyb2xsVG9Qb3NpdGlvbihmaXJzdEVycm9yT2Zmc2V0LCBudWxsLCAtMTApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uKHBvcywgaGFzaCwgb2Zmc2V0KSB7XHJcbiAgICBpZiAodHlwZW9mIG9mZnNldCA9PT0gXCJ1bmRlZmluZWRcIikgeyBvZmZzZXQgPSAwOyB9XHJcblxyXG4gICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgIHNjcm9sbFRvcDogKHBvcyArIG9mZnNldClcclxuICAgIH0sIHtcclxuICAgICAgICBzcGVlZDogc3BlZWRcclxuICAgIH0pLnByb21pc2UoKS5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGhhc2ggIT09IHVuZGVmaW5lZCAmJiBoYXNoICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIHZhciAkc2Nyb2xsXHRcdD0gJCgnaHRtbCwgYm9keScpLFxyXG4gICAgICAgICRib2R5XHRcdD0gJHNjcm9sbC5maWx0ZXIoJ2JvZHknKTtcclxuXHJcbiAgICAkYm9keS5vbignY2xpY2suaW50ZXJuYWwnLCAnW2hyZWYqPVwiI1wiXScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciAkYVx0XHQ9ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCdhJyksXHJcbiAgICAgICAgICAgIGhyZWZcdD0gJGEuYXR0cignaHJlZicpLFxyXG4gICAgICAgICAgICBoYXNoLFxyXG4gICAgICAgICAgICAkdGFyZ2V0O1xyXG5cclxuICAgICAgICBpZiAoaHJlZi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaGFzaCA9IGhyZWYuc3Vic3RyaW5nKGhyZWYuaW5kZXhPZignIycpKTtcclxuICAgICAgICAgICAgJHRhcmdldCA9ICQoaGFzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAvLyAkYm9keS5maW5kKCdbZGF0YS10b2dnbGU9XCJuYXZpZ2F0aW9uXCJdJykudHJpZ2dlcignY2xpY2submF2aWdhdGlvbi5zaG93LWhpZGUnKTtcclxuICAgICAgICAgICAgc2Nyb2xsVG9Qb3NpdGlvbigkdGFyZ2V0Lm9mZnNldCgpLnRvcCwgaGFzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgY2hlY2tFcnJvcnM6IGNoZWNrRXJyb3JzLFxyXG4gICAgc2Nyb2xsVG9Qb3NpdGlvbjogc2Nyb2xsVG9Qb3NpdGlvbixcclxuICAgIGluaXQ6IGluaXRcclxufTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCcuYWNjb3JkaW9uLXRhYnMtbWluaW1hbCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCdsaScpLmZpcnN0KCkuY2hpbGRyZW4oJ2EnKS5hZGRDbGFzcygnaXMtYWN0aXZlJykubmV4dCgpLmFkZENsYXNzKCdpcy1vcGVuJykuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuYWNjb3JkaW9uLXRhYnMtbWluaW1hbCcpLm9uKCdjbGljaycsICdsaSA+IGEudGFiLWxpbmsnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdpcy1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBhY2NvcmRpb25UYWJzID0gJCh0aGlzKS5jbG9zZXN0KCcuYWNjb3JkaW9uLXRhYnMtbWluaW1hbCcpO1xyXG4gICAgICAgICAgICAgICAgYWNjb3JkaW9uVGFicy5maW5kKCcuaXMtb3BlbicpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJykuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJykudG9nZ2xlKCk7XHJcbiAgICAgICAgICAgICAgICBhY2NvcmRpb25UYWJzLmZpbmQoJy5pcy1hY3RpdmUnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnLmpzLWFjY29yZGlvbi10cmlnZ2VyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnLnN1Ym1lbnUnKS5zbGlkZVRvZ2dsZSgnZmFzdCcpOyAgLy8gYXBwbHkgdGhlIHRvZ2dsZSB0byB0aGUgdWxcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS50b2dnbGVDbGFzcygnaXMtZXhwYW5kZWQnKTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgIFx0dmFyICRsZXR0ZXJzID0gJCgnW2RhdGEtYWxwaGFiZXQ9XCJzZy1sZXR0ZXJzXCJdJyksXHJcbiAgICBcdFx0XHQkbGFyZ2UgPSAkKCdbZGF0YS1hbHBoYWJldD1cImxhcmdlXCJdJyksXHJcbiAgICBcdFx0XHRpZCA9ICd0eXBvZ3JhcGh5LWxldHRlcnMnLFxyXG4gICAgXHRcdFx0YWN0aXZlQ2xhc3MgPSAnYWN0aXZlJyxcclxuICAgIFx0XHRcdGVuYWJsZWRcdD0gJC5mbi5jYXJvdXNlbCxcclxuICAgIFx0XHRcdHByZXYgPSBbXSxcclxuICAgIFx0XHRcdG5leHQgPSBbXSxcclxuICAgIFx0XHRcdG9wdGlvbnNcdD0ge1xyXG4gICAgXHRcdFx0XHRpbnRlcnZhbDogMjUwMCxcclxuICAgIFx0XHRcdFx0cGF1c2U6ICdob3ZlcicsXHJcbiAgICBcdFx0XHRcdHdyYXA6IHRydWUsXHJcbiAgICBcdFx0XHRcdGtleWJvYXJkOiB0cnVlXHJcbiAgICBcdFx0XHR9O1xyXG5cclxuICAgIFx0aWYgKGVuYWJsZWQpIHtcclxuICAgIFx0XHQkbGV0dGVycy5odG1sKGZ1bmN0aW9uKGluZGV4LCB0ZXh0KSB7XHJcbiAgICBcdFx0XHR2YXIgbGV0dGVyc1x0PSB0ZXh0LnNwbGl0KCcnKSxcclxuICAgIFx0XHRcdFx0XHRodG1sID0gW10sXHJcbiAgICBcdFx0XHRcdFx0Y2Fyb3VzZWwgPSBbXSxcclxuICAgIFx0XHRcdFx0XHRpXHQ9IDAsXHJcbiAgICBcdFx0XHRcdFx0Y1x0PSAwO1xyXG5cclxuICAgIFx0XHRcdGZvciAoaSA9IDA7IGkgPCBsZXR0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBcdFx0XHRcdHZhciBsZXR0ZXJcdD0gbGV0dGVyc1tpXTtcclxuICAgIFx0XHRcdFx0aHRtbFtpXVx0XHQ9ICc8YSBocmVmPVwiI1wiIGRhdGEtbGV0dGVyPVwiJyArIGxldHRlciArICdcIiBkYXRhLXRhcmdldD1cIiMnICsgaWQgKyAnXCIgZGF0YS1zbGlkZS10bz1cIicgKyBpICsgJ1wiIGNsYXNzPVwic2ctbGV0dGVyJyArIChpID09PSAwID8gJyAnICsgYWN0aXZlQ2xhc3MgOiAnJykgKyAnXCI+JyArIGxldHRlciArICc8L2E+JztcclxuICAgIFx0XHRcdFx0Y2Fyb3VzZWxbY11cdD0gJzxkaXYgZGF0YS1sZXR0ZXI9XCInICsgbGV0dGVyICsgJ1wiIGNsYXNzPVwiaXRlbScgKyAoaSA9PT0gMCA/ICcgJyArIGFjdGl2ZUNsYXNzIDogJycpICsgJ1wiPicgKyBsZXR0ZXIgKyAnPC9kaXY+JztcclxuICAgIFx0XHRcdFx0YysrO1xyXG4gICAgXHRcdFx0fVxyXG5cclxuICAgIFx0XHRcdC8vIHNldCB0aGUgY2Fyb3VzZWwgSFRNTFxyXG4gICAgXHRcdFx0JGxhcmdlLmh0bWwoY2Fyb3VzZWwuam9pbignJykpO1xyXG5cclxuICAgIFx0XHRcdHJldHVybiBodG1sLmpvaW4oJycpO1xyXG4gICAgXHRcdH0pO1xyXG5cclxuICAgIFx0XHRwcmV2LnB1c2goJzxhIGRhdGEtc2xpZGU9XCJwcmV2XCIgcm9sZT1cImJ1dHRvblwiIGhyZWY9XCIjJyArIGlkICsgJ1wiIGNsYXNzPVwibGVmdCBjYXJvdXNlbC1jb250cm9sXCI+Jyk7XHJcbiAgICBcdFx0XHRwcmV2LnB1c2goJzxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIGNsYXNzPVwiaWNvbi1wcmV2XCI+PC9zcGFuPicpO1xyXG4gICAgXHRcdFx0cHJldi5wdXNoKCc8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj5QcmV2aW91czwvc3Bhbj4nKTtcclxuICAgIFx0XHRwcmV2LnB1c2goJzwvYT4nKTtcclxuXHJcbiAgICBcdFx0bmV4dC5wdXNoKCc8YSBkYXRhLXNsaWRlPVwibmV4dFwiIHJvbGU9XCJidXR0b25cIiBocmVmPVwiIycgKyBpZCArICdcIiBjbGFzcz1cInJpZ2h0IGNhcm91c2VsLWNvbnRyb2xcIj4nKTtcclxuICAgIFx0XHRcdG5leHQucHVzaCgnPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCIgY2xhc3M9XCJpY29uLW5leHRcIj48L3NwYW4+Jyk7XHJcbiAgICBcdFx0XHRuZXh0LnB1c2goJzxzcGFuIGNsYXNzPVwic3Itb25seVwiPk5leHQ8L3NwYW4+Jyk7XHJcbiAgICBcdFx0bmV4dC5wdXNoKCc8L2E+Jyk7XHJcblxyXG4gICAgXHRcdCRsYXJnZS53cmFwSW5uZXIoJzxkaXYgY2xhc3M9XCJjYXJvdXNlbC1pbm5lclwiPjwvZGl2PicpLmFwcGVuZChwcmV2LmpvaW4oJycpKS5hcHBlbmQobmV4dC5qb2luKCcnKSk7XHJcbiAgICBcdFx0JGxhcmdlLmF0dHIoJ2lkJywgaWQpLmFkZENsYXNzKCdjYXJvdXNlbCBzbGlkZScpLmNhcm91c2VsKG9wdGlvbnMpLm9uKCdzbGlkZS5icy5jYXJvdXNlbCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgXHRcdFx0dmFyICRjdXJyZW50XHQ9ICQoZXZlbnQucmVsYXRlZFRhcmdldCksXHJcbiAgICBcdFx0XHRcdGluZGV4XHRcdD0gJGN1cnJlbnQuaW5kZXgoKTtcclxuXHJcbiAgICBcdFx0XHQkbGV0dGVycy5maW5kKCdhJykucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3MpLmVxKGluZGV4KS5hZGRDbGFzcyhhY3RpdmVDbGFzcyk7XHJcbiAgICBcdFx0fSkub24oJ3NsaWQuYnMuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoKSB7fSk7XHJcbiAgICBcdH1cclxuICAgIH1cclxufTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgYWN0aXZlQ2xhc3MgPSAnYWN0aXZlJztcclxuXHJcbiAgICAgICAgJCgnLnNnLWhlbHAnKS5lYWNoKGZ1bmN0aW9uIChpLCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhclx0JGhlbHBcdFx0PSAkKGVsZW1lbnQpLFxyXG4gICAgICAgICAgICAkc2VjdGlvbnNcdD0gJGhlbHAuZmluZCgnLnNnLWhlbHBfX3NlY3Rpb24nKSxcclxuICAgICAgICAgICAgaHRtbFx0XHQ9IFtdLFxyXG4gICAgICAgICAgICBoXHRcdFx0PSAwO1xyXG5cclxuICAgICAgICAgICAgJHNlY3Rpb25zLmVhY2goZnVuY3Rpb24gKHMsIHNlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHZhciAkc2VjdGlvblx0PSAkKHNlY3Rpb24pLFxyXG4gICAgICAgICAgICAgICAgdGl0bGVcdFx0PSAkc2VjdGlvbi5maW5kKCcuc2ctaGVscF9fc2VjdGlvbl9fdGl0bGUnKS50ZXh0KCksXHJcbiAgICAgICAgICAgICAgICB0YWJcdFx0XHQ9ICRzZWN0aW9uLmRhdGEoJ3RhYicpLFxyXG4gICAgICAgICAgICAgICAgY2xhc3Nlc1x0XHQ9IFsnYnRuJywgJ2J0bi0tbGluayddO1xyXG5cclxuICAgICAgICAgICAgICAgIGh0bWxbaCsrXSA9ICc8YSBjbGFzcz1cIicgKyBjbGFzc2VzLmpvaW4oJyAnKSArICdcIiBkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCIgZGF0YS10YXJnZXQ9XCInICsgdGFiICsgJ1wiIGhyZWY9XCIjJyArIHRhYiArICdcIj4nICsgdGl0bGUgKyAnPC9hPic7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJGhlbHAucHJlcGVuZCgnPGRpdiBjbGFzcz1cInNnLWhlbHBfX25hdiBidG4tZ3JvdXBcIiBkYXRhLWNvdW50PVwiJyArIGggKyAnXCI+JyArIGh0bWwuam9pbignJykgKyAnPC9kaXY+Jyk7XHJcbiAgICAgICAgfSkub24oJ2NsaWNrLmhlbHAnLCAnLmJ0bicsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgJGJ1dHRvblx0PSAkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCgnLmJ0bicpLFxyXG4gICAgICAgICAgICAkZ3JvdXBcdD0gJGJ1dHRvbi5jbG9zZXN0KCcuc2ctaGVscF9fbmF2JyksXHJcbiAgICAgICAgICAgICRoZWxwXHQ9ICRidXR0b24uY2xvc2VzdCgnLnNnLWhlbHAnKSxcclxuICAgICAgICAgICAgdGFyZ2V0XHQ9ICRidXR0b24uZGF0YSgndGFyZ2V0JyksXHJcbiAgICAgICAgICAgICR0YXJnZXRcdD0gJGhlbHAuZmluZCgnW2RhdGEtdGFiPVwiJyArIHRhcmdldCArICdcIl0nKTtcclxuXHJcbiAgICAgICAgICAgICRncm91cC5maW5kKCcuYnRuJykucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICAkdGFyZ2V0LnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCR0YXJnZXQuaXMoJy4nICsgYWN0aXZlQ2xhc3MpKSB7XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmFkZCgkYnV0dG9uKS5yZW1vdmVDbGFzcyhhY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmFkZCgkYnV0dG9uKS5hZGRDbGFzcyhhY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07XHJcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICBcdHZhciAkYm9keVx0XHQ9ICQoJ2JvZHknKSxcclxuICAgIFx0XHRiZWZvcmVcdFx0PSAkYm9keS5kYXRhKCduYXZpZ2F0aW9uLXRyaWdnZXInKSB8fCAnLmxvZ28nLFxyXG4gICAgXHRcdHNob3duQ2xhc3NcdD0gJGJvZHkuZGF0YSgnbmF2aWdhdGlvbi1jbGFzcycpIHx8ICdzaWRlYmFyLS1zaG93bicsXHJcbiAgICBcdFx0JGJlZm9yZVx0XHQ9ICQoYmVmb3JlKSxcclxuICAgIFx0XHRodG1sXHRcdD0gW10sXHJcbiAgICBcdFx0aFx0XHRcdD0gMDtcclxuXHJcbiAgICBcdGh0bWxbaCsrXSA9ICc8YnV0dG9uIGRhdGEtdG9nZ2xlPVwibmF2aWdhdGlvblwiPic7XHJcbiAgICBcdFx0aHRtbFtoKytdID0gJzxzcGFuPjwvc3Bhbj4nO1xyXG4gICAgXHRcdGh0bWxbaCsrXSA9ICc8c3Bhbj48L3NwYW4+JztcclxuICAgIFx0XHRodG1sW2grK10gPSAnPHNwYW4+PC9zcGFuPic7XHJcbiAgICBcdGh0bWxbaCsrXSA9ICc8L2J1dHRvbj4nO1xyXG5cclxuICAgIFx0JChodG1sLmpvaW4oJycpKS5pbnNlcnRCZWZvcmUoJGJlZm9yZSk7XHJcblxyXG4gICAgXHQkYm9keS5vbignY2xpY2submF2aWdhdGlvbi5zaG93LWhpZGUnLCAnW2RhdGEtdG9nZ2xlPVwibmF2aWdhdGlvblwiXScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgXHRcdGlmICgkYm9keS5pcygnLicgKyBzaG93bkNsYXNzKSkge1xyXG4gICAgXHRcdFx0JGJvZHkucmVtb3ZlQ2xhc3Moc2hvd25DbGFzcyk7XHJcbiAgICBcdFx0fSBlbHNlIHtcclxuICAgIFx0XHRcdCRib2R5LmFkZENsYXNzKHNob3duQ2xhc3MpO1xyXG4gICAgXHRcdH1cclxuXHJcbiAgICBcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIFx0fSkub24oJ2NsaWNrLm5hdmlnYXRpb24uc3ViJywgJy5uYXZfX2l0ZW0tLWhhcy1zdWIgPiBhJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBcdFx0dmFyICRsaVx0PSAkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCgnLm5hdl9faXRlbS0taGFzLXN1YicpLFxyXG4gICAgXHRcdFx0JHVsXHQ9ICRsaS5jaGlsZHJlbigndWwnKTtcclxuXHJcbiAgICBcdFx0aWYgKCR1bC5pcygnOnZpc2libGUnKSkge1xyXG4gICAgXHRcdFx0JHVsLnN0b3AoKS5zbGlkZVVwKCk7XHJcbiAgICBcdFx0fSBlbHNlIHtcclxuICAgIFx0XHRcdCR1bC5zdG9wKCkuc2xpZGVEb3duKCk7XHJcbiAgICBcdFx0fVxyXG5cclxuICAgIFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHR9KTtcclxuICAgIH1cclxufTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgJGNvbnRhaW5lclx0PSAkKCdbZGF0YS1zaG93LWhpZGU9XCJjb250YWluZXJcIl0nKSxcclxuICAgICAgICBodG1sXHRcdD0gW10sXHJcbiAgICAgICAgaFx0XHRcdD0gMDtcclxuXHJcbiAgICAgICAgaHRtbFtoKytdID0gJzxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIiBkYXRhLXNob3ctaGlkZT1cInNob3ctaGlkZVwiPic7XHJcbiAgICAgICAgaHRtbFtoKytdID0gJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJidG4gYnRuLS1zbWFsbCBidG4tLWxpbmtcIiBkYXRhLXNob3ctaGlkZT1cInNob3dcIj5TaG93IEFsbDwvYT4nO1xyXG4gICAgICAgIGh0bWxbaCsrXSA9ICc8YSBocmVmPVwiI1wiIGNsYXNzPVwiYnRuIGJ0bi0tc21hbGwgYnRuLS1saW5rXCIgZGF0YS1zaG93LWhpZGU9XCJoaWRlXCI+SGlkZSBBbGw8L2E+JztcclxuICAgICAgICBodG1sW2grK10gPSAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgJGNvbnRhaW5lci5vbignY2xpY2snLCAnW2RhdGEtc2hvdy1oaWRlPVwidG9nZ2xlXCJdJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciAkdG9nZ2xlXHQ9ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCdbZGF0YS1zaG93LWhpZGU9XCJ0b2dnbGVcIl0nKSxcclxuICAgICAgICAgICAgJHNob3dcdD0gJHRvZ2dsZS5wYXJlbnQoKS5maW5kKCdbZGF0YS1zaG93LWhpZGU9XCJ2YWx1ZVwiXScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRzaG93LmlzKCdbZGF0YS1kZWZhdWx0PVwidHJ1ZVwiXScpKSB7XHJcbiAgICAgICAgICAgICAgICAkc2hvdy5hdHRyKCdkYXRhLWRlZmF1bHQnLCAnZmFsc2UnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzaG93LmF0dHIoJ2RhdGEtZGVmYXVsdCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSkuZWFjaChmdW5jdGlvbiAoaSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAkKGVsZW1lbnQpLmFwcGVuZChodG1sLmpvaW4oJycpKTtcclxuICAgICAgICB9KS5vbignY2xpY2snLCAnW2RhdGEtc2hvdy1oaWRlPVwic2hvd1wiXSwgW2RhdGEtc2hvdy1oaWRlPVwiaGlkZVwiXScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgJGxpbmtcdD0gJChldmVudC50YXJnZXQpLmNsb3Nlc3QoJ1tkYXRhLXNob3ctaGlkZT1cInNob3dcIl0sIFtkYXRhLXNob3ctaGlkZT1cImhpZGVcIl0nKSxcclxuICAgICAgICAgICAgJGNcdFx0PSAkbGluay5jbG9zZXN0KCdbZGF0YS1zaG93LWhpZGU9XCJjb250YWluZXJcIl0nKSxcclxuICAgICAgICAgICAgJHZhbHVlc1x0PSAkYy5maW5kKCdbZGF0YS1zaG93LWhpZGU9XCJ2YWx1ZVwiXScpLFxyXG4gICAgICAgICAgICB0eXBlXHQ9ICRsaW5rLmRhdGEoJ3Nob3ctaGlkZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdzaG93Jykge1xyXG4gICAgICAgICAgICAgICAgJHZhbHVlcy5hdHRyKCdkYXRhLWRlZmF1bHQnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdoaWRlJykge1xyXG4gICAgICAgICAgICAgICAgJHZhbHVlcy5hdHRyKCdkYXRhLWRlZmF1bHQnLCAnZmFsc2UnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnLmV4cGFuZGVyLXRyaWdnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBcdFx0JCh0aGlzKS50b2dnbGVDbGFzcyhcImV4cGFuZGVyLWhpZGRlblwiKTtcclxuICAgIFx0fSk7XHJcbiAgICB9XHJcbn07XHJcbiIsIndpbmRvdy5hcHBpdXMgPSB7XHJcblx0c2Nyb2xsZXI6IHJlcXVpcmUoJy4vX2FwcGl1cy5zY3JvbGxlci5qcycpLFxyXG5cdHByaW1hcnlOYXY6IHJlcXVpcmUoJy4vX2FwcGl1cy5wcmltYXJ5TmF2LmpzJyksXHJcblx0YWNjb3JkaW9uOiByZXF1aXJlKCcuL19zdW5saWZlLmFjY29yZGlvbnMuanMnKSxcclxuXHRzaG93SGlkZTogcmVxdWlyZSgnLi9fc3VubGlmZS5zaG93SGlkZS5qcycpLFxyXG5cdGhlbHA6IHJlcXVpcmUoJy4vX3N1bmxpZmUuaGVscC5qcycpLFxyXG5cdGFscGhhYmV0Q2Fyb3VzZWw6IHJlcXVpcmUoJy4vX3N1bmxpZmUuYWxwaGFiZXRDYXJvdXNlbC5qcycpLFxyXG5cdGZvb3RlclRvZ2dsZTogcmVxdWlyZSgnLi9fYXBwaXVzLmZvb3RlclRvZ2dsZS5qcycpLFxyXG5cdG5hdjogcmVxdWlyZSgnLi9fc3VubGlmZS5uYXYuanMnKVxyXG59O1xyXG5cclxu77u/cmVxdWlyZSgnLi92ZW5kb3IvYm9vdHN0cmFwLmpzJyk7XHJcbnJlcXVpcmUoJy4vX2FwcGl1cy5lcXVhbGlzZS5qcycpO1xyXG5yZXF1aXJlKCcuL19hcHBpdXMuZm9ybVJlZ2V4VmFsaWRhdGlvbi5qcycpO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG5cdGFwcGl1cy5zY3JvbGxlci5pbml0KCk7XHJcblx0YXBwaXVzLnByaW1hcnlOYXYuaW5pdCgpO1xyXG5cdGFwcGl1cy5hY2NvcmRpb24uaW5pdCgpO1xyXG5cdGFwcGl1cy5zaG93SGlkZS5pbml0KCk7XHJcblx0YXBwaXVzLmhlbHAuaW5pdCgpO1xyXG5cdGFwcGl1cy5hbHBoYWJldENhcm91c2VsLmluaXQoKTtcclxuXHRhcHBpdXMuZm9vdGVyVG9nZ2xlLmluaXQoKTtcclxuXHRhcHBpdXMubmF2LmluaXQoKTtcclxufSk7XHJcbiIsIi8vIHJlcXVpcmUoJy4vYm9vdHN0cmFwL3RyYW5zaXRpb24uanMnKTtcclxuLy8gcmVxdWlyZSgnLi9ib290c3RyYXAvYWxlcnQuanMnKTtcclxuLy8gcmVxdWlyZSgnLi9ib290c3RyYXAvYnV0dG9uLmpzJyk7XHJcbnJlcXVpcmUoJy4vYm9vdHN0cmFwL2Nhcm91c2VsLmpzJyk7XHJcbi8vIHJlcXVpcmUoJy4vYm9vdHN0cmFwL2NvbGxhcHNlLmpzJyk7XHJcbi8vIHJlcXVpcmUoJy4vYm9vdHN0cmFwL2Ryb3Bkb3duLmpzJyk7XHJcbi8vIHJlcXVpcmUoJy4vYm9vdHN0cmFwL21vZGFsLmpzJyk7XHJcbnJlcXVpcmUoJy4vYm9vdHN0cmFwL3RhYi5qcycpO1xyXG4vLyByZXF1aXJlKCcuL2Jvb3RzdHJhcC9hZmZpeC5qcycpO1xyXG4vLyByZXF1aXJlKCcuL2Jvb3RzdHJhcC9zY3JvbGxzcHkuanMnKTtcclxuLy8gcmVxdWlyZSgnLi9ib290c3RyYXAvdG9vbHRpcC5qcycpO1xyXG4vLyByZXF1aXJlKCcuL2Jvb3RzdHJhcC9wb3BvdmVyLmpzJyk7XHJcbiIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBCb290c3RyYXA6IGNhcm91c2VsLmpzIHYzLjMuN1xyXG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNjYXJvdXNlbFxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cclxuXHJcbitmdW5jdGlvbiAoJCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgLy8gQ0FST1VTRUwgQ0xBU1MgREVGSU5JVElPTlxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgdmFyIENhcm91c2VsID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuICAgIHRoaXMuJGVsZW1lbnQgICAgPSAkKGVsZW1lbnQpXHJcbiAgICB0aGlzLiRpbmRpY2F0b3JzID0gdGhpcy4kZWxlbWVudC5maW5kKCcuY2Fyb3VzZWwtaW5kaWNhdG9ycycpXHJcbiAgICB0aGlzLm9wdGlvbnMgICAgID0gb3B0aW9uc1xyXG4gICAgdGhpcy5wYXVzZWQgICAgICA9IG51bGxcclxuICAgIHRoaXMuc2xpZGluZyAgICAgPSBudWxsXHJcbiAgICB0aGlzLmludGVydmFsICAgID0gbnVsbFxyXG4gICAgdGhpcy4kYWN0aXZlICAgICA9IG51bGxcclxuICAgIHRoaXMuJGl0ZW1zICAgICAgPSBudWxsXHJcblxyXG4gICAgdGhpcy5vcHRpb25zLmtleWJvYXJkICYmIHRoaXMuJGVsZW1lbnQub24oJ2tleWRvd24uYnMuY2Fyb3VzZWwnLCAkLnByb3h5KHRoaXMua2V5ZG93biwgdGhpcykpXHJcblxyXG4gICAgdGhpcy5vcHRpb25zLnBhdXNlID09ICdob3ZlcicgJiYgISgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpICYmIHRoaXMuJGVsZW1lbnRcclxuICAgICAgLm9uKCdtb3VzZWVudGVyLmJzLmNhcm91c2VsJywgJC5wcm94eSh0aGlzLnBhdXNlLCB0aGlzKSlcclxuICAgICAgLm9uKCdtb3VzZWxlYXZlLmJzLmNhcm91c2VsJywgJC5wcm94eSh0aGlzLmN5Y2xlLCB0aGlzKSlcclxuICB9XHJcblxyXG4gIENhcm91c2VsLlZFUlNJT04gID0gJzMuMy43J1xyXG5cclxuICBDYXJvdXNlbC5UUkFOU0lUSU9OX0RVUkFUSU9OID0gNjAwXHJcblxyXG4gIENhcm91c2VsLkRFRkFVTFRTID0ge1xyXG4gICAgaW50ZXJ2YWw6IDUwMDAsXHJcbiAgICBwYXVzZTogJ2hvdmVyJyxcclxuICAgIHdyYXA6IHRydWUsXHJcbiAgICBrZXlib2FyZDogdHJ1ZVxyXG4gIH1cclxuXHJcbiAgQ2Fyb3VzZWwucHJvdG90eXBlLmtleWRvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSkpIHJldHVyblxyXG4gICAgc3dpdGNoIChlLndoaWNoKSB7XHJcbiAgICAgIGNhc2UgMzc6IHRoaXMucHJldigpOyBicmVha1xyXG4gICAgICBjYXNlIDM5OiB0aGlzLm5leHQoKTsgYnJlYWtcclxuICAgICAgZGVmYXVsdDogcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgfVxyXG5cclxuICBDYXJvdXNlbC5wcm90b3R5cGUuY3ljbGUgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgZSB8fCAodGhpcy5wYXVzZWQgPSBmYWxzZSlcclxuXHJcbiAgICB0aGlzLmludGVydmFsICYmIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbClcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuaW50ZXJ2YWxcclxuICAgICAgJiYgIXRoaXMucGF1c2VkXHJcbiAgICAgICYmICh0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoJC5wcm94eSh0aGlzLm5leHQsIHRoaXMpLCB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpKVxyXG5cclxuICAgIHJldHVybiB0aGlzXHJcbiAgfVxyXG5cclxuICBDYXJvdXNlbC5wcm90b3R5cGUuZ2V0SXRlbUluZGV4ID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgIHRoaXMuJGl0ZW1zID0gaXRlbS5wYXJlbnQoKS5jaGlsZHJlbignLml0ZW0nKVxyXG4gICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmluZGV4KGl0ZW0gfHwgdGhpcy4kYWN0aXZlKVxyXG4gIH1cclxuXHJcbiAgQ2Fyb3VzZWwucHJvdG90eXBlLmdldEl0ZW1Gb3JEaXJlY3Rpb24gPSBmdW5jdGlvbiAoZGlyZWN0aW9uLCBhY3RpdmUpIHtcclxuICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuZ2V0SXRlbUluZGV4KGFjdGl2ZSlcclxuICAgIHZhciB3aWxsV3JhcCA9IChkaXJlY3Rpb24gPT0gJ3ByZXYnICYmIGFjdGl2ZUluZGV4ID09PSAwKVxyXG4gICAgICAgICAgICAgICAgfHwgKGRpcmVjdGlvbiA9PSAnbmV4dCcgJiYgYWN0aXZlSW5kZXggPT0gKHRoaXMuJGl0ZW1zLmxlbmd0aCAtIDEpKVxyXG4gICAgaWYgKHdpbGxXcmFwICYmICF0aGlzLm9wdGlvbnMud3JhcCkgcmV0dXJuIGFjdGl2ZVxyXG4gICAgdmFyIGRlbHRhID0gZGlyZWN0aW9uID09ICdwcmV2JyA/IC0xIDogMVxyXG4gICAgdmFyIGl0ZW1JbmRleCA9IChhY3RpdmVJbmRleCArIGRlbHRhKSAlIHRoaXMuJGl0ZW1zLmxlbmd0aFxyXG4gICAgcmV0dXJuIHRoaXMuJGl0ZW1zLmVxKGl0ZW1JbmRleClcclxuICB9XHJcblxyXG4gIENhcm91c2VsLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uIChwb3MpIHtcclxuICAgIHZhciB0aGF0ICAgICAgICA9IHRoaXNcclxuICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuZ2V0SXRlbUluZGV4KHRoaXMuJGFjdGl2ZSA9IHRoaXMuJGVsZW1lbnQuZmluZCgnLml0ZW0uYWN0aXZlJykpXHJcblxyXG4gICAgaWYgKHBvcyA+ICh0aGlzLiRpdGVtcy5sZW5ndGggLSAxKSB8fCBwb3MgPCAwKSByZXR1cm5cclxuXHJcbiAgICBpZiAodGhpcy5zbGlkaW5nKSAgICAgICByZXR1cm4gdGhpcy4kZWxlbWVudC5vbmUoJ3NsaWQuYnMuY2Fyb3VzZWwnLCBmdW5jdGlvbiAoKSB7IHRoYXQudG8ocG9zKSB9KSAvLyB5ZXMsIFwic2xpZFwiXHJcbiAgICBpZiAoYWN0aXZlSW5kZXggPT0gcG9zKSByZXR1cm4gdGhpcy5wYXVzZSgpLmN5Y2xlKClcclxuXHJcbiAgICByZXR1cm4gdGhpcy5zbGlkZShwb3MgPiBhY3RpdmVJbmRleCA/ICduZXh0JyA6ICdwcmV2JywgdGhpcy4kaXRlbXMuZXEocG9zKSlcclxuICB9XHJcblxyXG4gIENhcm91c2VsLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlIHx8ICh0aGlzLnBhdXNlZCA9IHRydWUpXHJcblxyXG4gICAgaWYgKHRoaXMuJGVsZW1lbnQuZmluZCgnLm5leHQsIC5wcmV2JykubGVuZ3RoICYmICQuc3VwcG9ydC50cmFuc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcigkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpXHJcbiAgICAgIHRoaXMuY3ljbGUodHJ1ZSlcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmludGVydmFsID0gY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKVxyXG5cclxuICAgIHJldHVybiB0aGlzXHJcbiAgfVxyXG5cclxuICBDYXJvdXNlbC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnNsaWRpbmcpIHJldHVyblxyXG4gICAgcmV0dXJuIHRoaXMuc2xpZGUoJ25leHQnKVxyXG4gIH1cclxuXHJcbiAgQ2Fyb3VzZWwucHJvdG90eXBlLnByZXYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5zbGlkaW5nKSByZXR1cm5cclxuICAgIHJldHVybiB0aGlzLnNsaWRlKCdwcmV2JylcclxuICB9XHJcblxyXG4gIENhcm91c2VsLnByb3RvdHlwZS5zbGlkZSA9IGZ1bmN0aW9uICh0eXBlLCBuZXh0KSB7XHJcbiAgICB2YXIgJGFjdGl2ZSAgID0gdGhpcy4kZWxlbWVudC5maW5kKCcuaXRlbS5hY3RpdmUnKVxyXG4gICAgdmFyICRuZXh0ICAgICA9IG5leHQgfHwgdGhpcy5nZXRJdGVtRm9yRGlyZWN0aW9uKHR5cGUsICRhY3RpdmUpXHJcbiAgICB2YXIgaXNDeWNsaW5nID0gdGhpcy5pbnRlcnZhbFxyXG4gICAgdmFyIGRpcmVjdGlvbiA9IHR5cGUgPT0gJ25leHQnID8gJ2xlZnQnIDogJ3JpZ2h0J1xyXG4gICAgdmFyIHRoYXQgICAgICA9IHRoaXNcclxuXHJcbiAgICBpZiAoJG5leHQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSByZXR1cm4gKHRoaXMuc2xpZGluZyA9IGZhbHNlKVxyXG5cclxuICAgIHZhciByZWxhdGVkVGFyZ2V0ID0gJG5leHRbMF1cclxuICAgIHZhciBzbGlkZUV2ZW50ID0gJC5FdmVudCgnc2xpZGUuYnMuY2Fyb3VzZWwnLCB7XHJcbiAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXQsXHJcbiAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXHJcbiAgICB9KVxyXG4gICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHNsaWRlRXZlbnQpXHJcbiAgICBpZiAoc2xpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXHJcblxyXG4gICAgdGhpcy5zbGlkaW5nID0gdHJ1ZVxyXG5cclxuICAgIGlzQ3ljbGluZyAmJiB0aGlzLnBhdXNlKClcclxuXHJcbiAgICBpZiAodGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgIHZhciAkbmV4dEluZGljYXRvciA9ICQodGhpcy4kaW5kaWNhdG9ycy5jaGlsZHJlbigpW3RoaXMuZ2V0SXRlbUluZGV4KCRuZXh0KV0pXHJcbiAgICAgICRuZXh0SW5kaWNhdG9yICYmICRuZXh0SW5kaWNhdG9yLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBzbGlkRXZlbnQgPSAkLkV2ZW50KCdzbGlkLmJzLmNhcm91c2VsJywgeyByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0LCBkaXJlY3Rpb246IGRpcmVjdGlvbiB9KSAvLyB5ZXMsIFwic2xpZFwiXHJcbiAgICBpZiAoJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnc2xpZGUnKSkge1xyXG4gICAgICAkbmV4dC5hZGRDbGFzcyh0eXBlKVxyXG4gICAgICAkbmV4dFswXS5vZmZzZXRXaWR0aCAvLyBmb3JjZSByZWZsb3dcclxuICAgICAgJGFjdGl2ZS5hZGRDbGFzcyhkaXJlY3Rpb24pXHJcbiAgICAgICRuZXh0LmFkZENsYXNzKGRpcmVjdGlvbilcclxuICAgICAgJGFjdGl2ZVxyXG4gICAgICAgIC5vbmUoJ2JzVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICRuZXh0LnJlbW92ZUNsYXNzKFt0eXBlLCBkaXJlY3Rpb25dLmpvaW4oJyAnKSkuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKFsnYWN0aXZlJywgZGlyZWN0aW9uXS5qb2luKCcgJykpXHJcbiAgICAgICAgICB0aGF0LnNsaWRpbmcgPSBmYWxzZVxyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoYXQuJGVsZW1lbnQudHJpZ2dlcihzbGlkRXZlbnQpXHJcbiAgICAgICAgICB9LCAwKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVtdWxhdGVUcmFuc2l0aW9uRW5kKENhcm91c2VsLlRSQU5TSVRJT05fRFVSQVRJT04pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkbmV4dC5hZGRDbGFzcygnYWN0aXZlJylcclxuICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2VcclxuICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKHNsaWRFdmVudClcclxuICAgIH1cclxuXHJcbiAgICBpc0N5Y2xpbmcgJiYgdGhpcy5jeWNsZSgpXHJcblxyXG4gICAgcmV0dXJuIHRoaXNcclxuICB9XHJcblxyXG5cclxuICAvLyBDQVJPVVNFTCBQTFVHSU4gREVGSU5JVElPTlxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcclxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcclxuICAgICAgdmFyIGRhdGEgICAgPSAkdGhpcy5kYXRhKCdicy5jYXJvdXNlbCcpXHJcbiAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIENhcm91c2VsLkRFRkFVTFRTLCAkdGhpcy5kYXRhKCksIHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uKVxyXG4gICAgICB2YXIgYWN0aW9uICA9IHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycgPyBvcHRpb24gOiBvcHRpb25zLnNsaWRlXHJcblxyXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLmNhcm91c2VsJywgKGRhdGEgPSBuZXcgQ2Fyb3VzZWwodGhpcywgb3B0aW9ucykpKVxyXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnbnVtYmVyJykgZGF0YS50byhvcHRpb24pXHJcbiAgICAgIGVsc2UgaWYgKGFjdGlvbikgZGF0YVthY3Rpb25dKClcclxuICAgICAgZWxzZSBpZiAob3B0aW9ucy5pbnRlcnZhbCkgZGF0YS5wYXVzZSgpLmN5Y2xlKClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB2YXIgb2xkID0gJC5mbi5jYXJvdXNlbFxyXG5cclxuICAkLmZuLmNhcm91c2VsICAgICAgICAgICAgID0gUGx1Z2luXHJcbiAgJC5mbi5jYXJvdXNlbC5Db25zdHJ1Y3RvciA9IENhcm91c2VsXHJcblxyXG5cclxuICAvLyBDQVJPVVNFTCBOTyBDT05GTElDVFxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICQuZm4uY2Fyb3VzZWwubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQuZm4uY2Fyb3VzZWwgPSBvbGRcclxuICAgIHJldHVybiB0aGlzXHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gQ0FST1VTRUwgREFUQS1BUElcclxuICAvLyA9PT09PT09PT09PT09PT09PVxyXG5cclxuICB2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIHZhciBocmVmXHJcbiAgICB2YXIgJHRoaXMgICA9ICQodGhpcylcclxuICAgIHZhciAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVmID0gJHRoaXMuYXR0cignaHJlZicpKSAmJiBocmVmLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sICcnKSkgLy8gc3RyaXAgZm9yIGllN1xyXG4gICAgaWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKCdjYXJvdXNlbCcpKSByZXR1cm5cclxuICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sICR0YXJnZXQuZGF0YSgpLCAkdGhpcy5kYXRhKCkpXHJcbiAgICB2YXIgc2xpZGVJbmRleCA9ICR0aGlzLmF0dHIoJ2RhdGEtc2xpZGUtdG8nKVxyXG4gICAgaWYgKHNsaWRlSW5kZXgpIG9wdGlvbnMuaW50ZXJ2YWwgPSBmYWxzZVxyXG5cclxuICAgIFBsdWdpbi5jYWxsKCR0YXJnZXQsIG9wdGlvbnMpXHJcblxyXG4gICAgaWYgKHNsaWRlSW5kZXgpIHtcclxuICAgICAgJHRhcmdldC5kYXRhKCdicy5jYXJvdXNlbCcpLnRvKHNsaWRlSW5kZXgpXHJcbiAgICB9XHJcblxyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgfVxyXG5cclxuICAkKGRvY3VtZW50KVxyXG4gICAgLm9uKCdjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaScsICdbZGF0YS1zbGlkZV0nLCBjbGlja0hhbmRsZXIpXHJcbiAgICAub24oJ2NsaWNrLmJzLmNhcm91c2VsLmRhdGEtYXBpJywgJ1tkYXRhLXNsaWRlLXRvXScsIGNsaWNrSGFuZGxlcilcclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgJCgnW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciAkY2Fyb3VzZWwgPSAkKHRoaXMpXHJcbiAgICAgIFBsdWdpbi5jYWxsKCRjYXJvdXNlbCwgJGNhcm91c2VsLmRhdGEoKSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbn0oalF1ZXJ5KTtcclxuIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIEJvb3RzdHJhcDogdGFiLmpzIHYzLjMuN1xyXG4gKiBodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyN0YWJzXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE2IFR3aXR0ZXIsIEluYy5cclxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG5cclxuK2Z1bmN0aW9uICgkKSB7XHJcbiAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAvLyBUQUIgQ0xBU1MgREVGSU5JVElPTlxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIHZhciBUYWIgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgLy8ganNjczpkaXNhYmxlIHJlcXVpcmVEb2xsYXJCZWZvcmVqUXVlcnlBc3NpZ25tZW50XHJcbiAgICB0aGlzLmVsZW1lbnQgPSAkKGVsZW1lbnQpXHJcbiAgICAvLyBqc2NzOmVuYWJsZSByZXF1aXJlRG9sbGFyQmVmb3JlalF1ZXJ5QXNzaWdubWVudFxyXG4gIH1cclxuXHJcbiAgVGFiLlZFUlNJT04gPSAnMy4zLjcnXHJcblxyXG4gIFRhYi5UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwXHJcblxyXG4gIFRhYi5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciAkdGhpcyAgICA9IHRoaXMuZWxlbWVudFxyXG4gICAgdmFyICR1bCAgICAgID0gJHRoaXMuY2xvc2VzdCgndWw6bm90KC5kcm9wZG93bi1tZW51KScpXHJcbiAgICB2YXIgc2VsZWN0b3IgPSAkdGhpcy5kYXRhKCd0YXJnZXQnKVxyXG5cclxuICAgIGlmICghc2VsZWN0b3IpIHtcclxuICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJylcclxuICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciAmJiBzZWxlY3Rvci5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLCAnJykgLy8gc3RyaXAgZm9yIGllN1xyXG4gICAgfVxyXG5cclxuICAgIGlmICgkdGhpcy5wYXJlbnQoJ2xpJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSByZXR1cm5cclxuXHJcbiAgICB2YXIgJHByZXZpb3VzID0gJHVsLmZpbmQoJy5hY3RpdmU6bGFzdCBhJylcclxuICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KCdoaWRlLmJzLnRhYicsIHtcclxuICAgICAgcmVsYXRlZFRhcmdldDogJHRoaXNbMF1cclxuICAgIH0pXHJcbiAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudCgnc2hvdy5icy50YWInLCB7XHJcbiAgICAgIHJlbGF0ZWRUYXJnZXQ6ICRwcmV2aW91c1swXVxyXG4gICAgfSlcclxuXHJcbiAgICAkcHJldmlvdXMudHJpZ2dlcihoaWRlRXZlbnQpXHJcbiAgICAkdGhpcy50cmlnZ2VyKHNob3dFdmVudClcclxuXHJcbiAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8IGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuXHJcblxyXG4gICAgdmFyICR0YXJnZXQgPSAkKHNlbGVjdG9yKVxyXG5cclxuICAgIHRoaXMuYWN0aXZhdGUoJHRoaXMuY2xvc2VzdCgnbGknKSwgJHVsKVxyXG4gICAgdGhpcy5hY3RpdmF0ZSgkdGFyZ2V0LCAkdGFyZ2V0LnBhcmVudCgpLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICRwcmV2aW91cy50cmlnZ2VyKHtcclxuICAgICAgICB0eXBlOiAnaGlkZGVuLmJzLnRhYicsXHJcbiAgICAgICAgcmVsYXRlZFRhcmdldDogJHRoaXNbMF1cclxuICAgICAgfSlcclxuICAgICAgJHRoaXMudHJpZ2dlcih7XHJcbiAgICAgICAgdHlwZTogJ3Nob3duLmJzLnRhYicsXHJcbiAgICAgICAgcmVsYXRlZFRhcmdldDogJHByZXZpb3VzWzBdXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgVGFiLnByb3RvdHlwZS5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgJGFjdGl2ZSAgICA9IGNvbnRhaW5lci5maW5kKCc+IC5hY3RpdmUnKVxyXG4gICAgdmFyIHRyYW5zaXRpb24gPSBjYWxsYmFja1xyXG4gICAgICAmJiAkLnN1cHBvcnQudHJhbnNpdGlvblxyXG4gICAgICAmJiAoJGFjdGl2ZS5sZW5ndGggJiYgJGFjdGl2ZS5oYXNDbGFzcygnZmFkZScpIHx8ICEhY29udGFpbmVyLmZpbmQoJz4gLmZhZGUnKS5sZW5ndGgpXHJcblxyXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgICAgJGFjdGl2ZVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgICAuZmluZCgnPiAuZHJvcGRvd24tbWVudSA+IC5hY3RpdmUnKVxyXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgIC5lbmQoKVxyXG4gICAgICAgIC5maW5kKCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nKVxyXG4gICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSlcclxuXHJcbiAgICAgIGVsZW1lbnRcclxuICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpXHJcbiAgICAgICAgICAuYXR0cignYXJpYS1leHBhbmRlZCcsIHRydWUpXHJcblxyXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xyXG4gICAgICAgIGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGggLy8gcmVmbG93IGZvciB0cmFuc2l0aW9uXHJcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnaW4nKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZhZGUnKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZWxlbWVudC5wYXJlbnQoJy5kcm9wZG93bi1tZW51JykubGVuZ3RoKSB7XHJcbiAgICAgICAgZWxlbWVudFxyXG4gICAgICAgICAgLmNsb3Nlc3QoJ2xpLmRyb3Bkb3duJylcclxuICAgICAgICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgICAgLmVuZCgpXHJcbiAgICAgICAgICAuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJylcclxuICAgICAgICAgICAgLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpXHJcbiAgICB9XHJcblxyXG4gICAgJGFjdGl2ZS5sZW5ndGggJiYgdHJhbnNpdGlvbiA/XHJcbiAgICAgICRhY3RpdmVcclxuICAgICAgICAub25lKCdic1RyYW5zaXRpb25FbmQnLCBuZXh0KVxyXG4gICAgICAgIC5lbXVsYXRlVHJhbnNpdGlvbkVuZChUYWIuVFJBTlNJVElPTl9EVVJBVElPTikgOlxyXG4gICAgICBuZXh0KClcclxuXHJcbiAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKCdpbicpXHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gVEFCIFBMVUdJTiBERUZJTklUSU9OXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGZ1bmN0aW9uIFBsdWdpbihvcHRpb24pIHtcclxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpXHJcbiAgICAgIHZhciBkYXRhICA9ICR0aGlzLmRhdGEoJ2JzLnRhYicpXHJcblxyXG4gICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2JzLnRhYicsIChkYXRhID0gbmV3IFRhYih0aGlzKSkpXHJcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHZhciBvbGQgPSAkLmZuLnRhYlxyXG5cclxuICAkLmZuLnRhYiAgICAgICAgICAgICA9IFBsdWdpblxyXG4gICQuZm4udGFiLkNvbnN0cnVjdG9yID0gVGFiXHJcblxyXG5cclxuICAvLyBUQUIgTk8gQ09ORkxJQ1RcclxuICAvLyA9PT09PT09PT09PT09PT1cclxuXHJcbiAgJC5mbi50YWIubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQuZm4udGFiID0gb2xkXHJcbiAgICByZXR1cm4gdGhpc1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIFRBQiBEQVRBLUFQSVxyXG4gIC8vID09PT09PT09PT09PVxyXG5cclxuICB2YXIgY2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgUGx1Z2luLmNhbGwoJCh0aGlzKSwgJ3Nob3cnKVxyXG4gIH1cclxuXHJcbiAgJChkb2N1bWVudClcclxuICAgIC5vbignY2xpY2suYnMudGFiLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScsIGNsaWNrSGFuZGxlcilcclxuICAgIC5vbignY2xpY2suYnMudGFiLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1cInBpbGxcIl0nLCBjbGlja0hhbmRsZXIpXHJcblxyXG59KGpRdWVyeSk7XHJcbiJdfQ=="}